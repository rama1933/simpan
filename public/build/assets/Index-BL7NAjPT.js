import{d as w,r as c,q as _,z as k,c as U,o as l,w as C,a as e,i as m,g as p,R as A,v as S,b as n,L as x,M as f,t as i,Q as M,h as g}from"./app-DhdgvStR.js";import{r as h}from"./route-fMlyL4SZ.js";import{_ as D}from"./AdminLayout-Cfy6bGWU.js";const L={class:"mb-8 flex justify-between items-center"},B=["href"],E={class:"bg-white rounded-lg shadow p-6 mb-6"},F={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},R={class:"bg-white rounded-lg shadow overflow-hidden"},K={class:"min-w-full divide-y divide-gray-200"},V={class:"bg-white divide-y divide-gray-200"},$={class:"px-6 py-4 whitespace-nowrap"},j={class:"flex items-center"},z={class:"flex-shrink-0 h-10 w-10"},P={class:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center"},T={class:"text-sm font-medium text-gray-700"},q={class:"ml-4"},I={class:"text-sm font-medium text-gray-900"},N={class:"text-sm text-gray-500"},Q={class:"px-6 py-4 whitespace-nowrap"},G={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},H=["href"],J=["onClick"],Z=w({__name:"Index",props:{user:{}},setup(O){const d=c([]),r=c({role:"",search:""}),y=_(()=>{let a=d.value;if(r.value.role&&(a=a.filter(t=>t.roles.some(s=>s.name===r.value.role))),r.value.search){const t=r.value.search.toLowerCase();a=a.filter(s=>s.name.toLowerCase().includes(t)||s.email.toLowerCase().includes(t))}return a}),u=async()=>{try{const a=await g.get("/users");d.value=a.data.data||[]}catch(a){console.error("Error fetching users:",a)}},v=()=>{},b=async a=>{if(confirm("Apakah Anda yakin ingin menghapus user ini?"))try{await g.delete(`/users/${a}`),await u()}catch{alert("Error menghapus user")}};return k(()=>{u()}),(a,t)=>(l(),U(D,{"page-title":"User Management",user:a.user},{default:C(()=>[e("div",L,[t[2]||(t[2]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"User Management"),e("p",{class:"mt-2 text-gray-600"},"Kelola user dan role dalam sistem")],-1)),e("a",{href:m(h)("users.create"),class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"}," Tambah User ",8,B)]),e("div",E,[e("div",F,[e("div",null,[t[4]||(t[4]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Filter by Role",-1)),p(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>r.value.role=s),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},t[3]||(t[3]=[e("option",{value:""},"Semua Role",-1),e("option",{value:"Admin"},"Admin",-1),e("option",{value:"User SKPD"},"User SKPD",-1)]),512),[[A,r.value.role]])]),e("div",null,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search",-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>r.value.search=s),type:"text",placeholder:"Cari nama atau email...",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[S,r.value.search]])]),e("div",{class:"flex items-end"},[e("button",{onClick:v,class:"w-full bg-gray-600 text-white py-2 px-4 rounded-md hover:bg-gray-700"}," Filter ")])])]),e("div",R,[e("table",K,[t[7]||(t[7]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," User "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Role "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",V,[(l(!0),n(x,null,f(y.value,s=>(l(),n("tr",{key:s.id},[e("td",$,[e("div",j,[e("div",z,[e("div",P,[e("span",T,i(s.name.charAt(0).toUpperCase()),1)])]),e("div",q,[e("div",I,i(s.name),1),e("div",N,i(s.email),1)])])]),e("td",Q,[(l(!0),n(x,null,f(s.roles,o=>(l(),n("span",{key:o.id,class:M(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",o.name==="Admin"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"])},i(o.name),3))),128))]),t[6]||(t[6]=e("td",{class:"px-6 py-4 whitespace-nowrap"},[e("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"}," Active ")],-1)),e("td",G,[e("a",{href:m(h)("users.edit",s.id),class:"text-blue-600 hover:text-blue-900 mr-4"}," Edit ",8,H),e("button",{onClick:o=>b(s.id),class:"text-red-600 hover:text-red-900"}," Delete ",8,J)])]))),128))])])])]),_:1},8,["user"]))}});export{Z as default};
