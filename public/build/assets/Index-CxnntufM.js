import{r as C,c as _,o as a,w as p,a as e,b as l,e as f,j as m,i as d,l as g,k as K,g as x,v as P,m as y,F as h,s as k,t as i,n as S,B as D}from"./app-KTcUsjKQ.js";import{_ as V}from"./AdminLayout-DNv_2wpW.js";import{r as c}from"./route-fMlyL4SZ.js";const T={class:"flex justify-between items-center mb-6"},H={class:"bg-white p-6 rounded-lg shadow mb-6"},L={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},A=["value"],N={class:"mt-1 text-xs text-gray-500"},z={class:"bg-white shadow-sm rounded-lg overflow-hidden"},O={class:"overflow-x-auto"},$={class:"min-w-full divide-y divide-gray-200"},F={key:0,class:"bg-white divide-y divide-gray-200"},I={class:"px-6 py-4 whitespace-nowrap"},U={class:"flex items-center"},E={class:"ml-4"},J={class:"text-sm font-medium text-gray-900"},q={class:"text-sm text-gray-500 truncate max-w-xs"},G={class:"px-6 py-4 whitespace-nowrap"},Q={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},R={key:1,class:"text-gray-400"},W={class:"px-6 py-4 whitespace-nowrap"},X={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Y={class:"px-6 py-4 whitespace-nowrap"},Z={key:0,class:"flex flex-col"},ee={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 mb-1"},te={class:"text-xs text-gray-600"},se={key:1,class:"text-gray-400"},ae={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ne={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},oe={class:"flex space-x-2"},le=["onClick"],re={key:0,class:"px-6 py-12 text-center"},ie={key:0,class:"mt-6"},de={class:"flex justify-center"},ue={class:"flex space-x-1"},xe={__name:"Index",props:{knowledge:{type:Object,default:()=>({data:[],links:[]})},filters:{type:Object,default:()=>({})},perPage:{type:Number,default:15},user:{type:Object,default:null},skpds:{type:Array,default:()=>[]}},setup(n){const u=n,r=C({search:u.filters.search||"",category:u.filters.category||"",status:u.filters.status||"",skpd:u.filters.skpd||""}),v=(()=>{let o;return()=>{clearTimeout(o),o=setTimeout(()=>{w()},500)}})(),w=()=>{D.get(c("knowledge.index"),r.value,{preserveState:!0,replace:!0})},j=o=>{confirm("Apakah Anda yakin ingin menghapus pengetahuan ini?")&&D.delete(c("knowledge.destroy",o))},B=o=>o?new Date(o).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}):"",M=()=>{if(!r.value.skpd)return"Pilih SKPD untuk melihat informasi detail";const o=u.skpds.find(s=>s.id==r.value.skpd);if(!o)return"";const t=o.metadata;return t?`${t.skpd_description||""} | ${t.skpd_address||""} | ${t.skpd_phone||""}`:o.name};return(o,t)=>(a(),_(V,{"page-title":"Knowledge Management",user:n.user},{default:p(()=>[e("div",T,[t[6]||(t[6]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Manajemen Pengetahuan"),e("p",{class:"text-gray-600 mt-2"},"Kelola dan atur semua pengetahuan dalam sistem")],-1)),m(d(g),{href:d(c)("knowledge.create"),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},{default:p(()=>t[5]||(t[5]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),K(" Tambah Pengetahuan ",-1)])),_:1,__:[5]},8,["href"])]),e("div",H,[e("div",L,[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pencarian",-1)),x(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>r.value.search=s),type:"text",placeholder:"Cari pengetahuan...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",onInput:t[1]||(t[1]=(...s)=>d(v)&&d(v)(...s))},null,544),[[P,r.value.search]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Kategori",-1)),x(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>r.value.category=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},t[8]||(t[8]=[e("option",{value:""},"Semua Kategori",-1),e("option",{value:"Teknologi"},"Teknologi",-1),e("option",{value:"Bisnis"},"Bisnis",-1),e("option",{value:"Kesehatan"},"Kesehatan",-1),e("option",{value:"Pendidikan"},"Pendidikan",-1),e("option",{value:"Seni & Budaya"},"Seni & Budaya",-1),e("option",{value:"Olahraga"},"Olahraga",-1),e("option",{value:"Sains"},"Sains",-1),e("option",{value:"Lainnya"},"Lainnya",-1)]),512),[[y,r.value.category]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),x(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>r.value.status=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},t[10]||(t[10]=[e("option",{value:""},"Semua Status",-1),e("option",{value:"draft"},"Draft",-1),e("option",{value:"published"},"Dipublikasi",-1),e("option",{value:"archived"},"Diarsipkan",-1)]),512),[[y,r.value.status]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"SKPD",-1)),x(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>r.value.skpd=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},[t[12]||(t[12]=e("option",{value:""},"Semua SKPD",-1)),(a(!0),l(h,null,k(n.skpds,s=>(a(),l("option",{key:s.id,value:s.id},i(s.metadata?.skpd_code||"N/A")+" - "+i(s.name),9,A))),128))],512),[[y,r.value.skpd]]),e("p",N,i(M()),1)]),e("div",{class:"flex items-end"},[e("button",{onClick:w,class:"w-full px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Terapkan Filter ")])])]),e("div",z,[e("div",O,[e("table",$,[t[18]||(t[18]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Judul "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Kategori "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Penulis "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," SKPD "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tanggal "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Aksi ")])],-1)),n.knowledge&&n.knowledge.data&&n.knowledge.data.length>0?(a(),l("tbody",F,[(a(!0),l(h,null,k(n.knowledge.data,s=>(a(),l("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors duration-150"},[e("td",I,[e("div",U,[t[14]||(t[14]=e("div",{class:"flex-shrink-0 h-10 w-10"},[e("div",{class:"h-10 w-10 rounded-lg bg-indigo-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])])],-1)),e("div",E,[e("div",J,i(s.title),1),e("div",q,i(s.description),1)])])]),e("td",G,[s.category?(a(),l("span",Q,i(s.category.name),1)):(a(),l("span",R,"-"))]),e("td",W,[e("span",{class:S(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",s.status==="published"?"bg-green-100 text-green-800":"",s.status==="draft"?"bg-yellow-100 text-yellow-800":"",s.status==="archived"?"bg-gray-100 text-gray-800":""])},i(s.status==="published"?"Dipublikasi":s.status==="draft"?"Draft":"Diarsipkan"),3)]),e("td",X,i(s.author?s.author.name:"-"),1),e("td",Y,[s.skpd?(a(),l("div",Z,[e("span",ee,i(s.skpd.metadata?.skpd_code||"N/A"),1),e("span",te,i(s.skpd.name),1)])):(a(),l("span",se,"-"))]),e("td",ae,i(B(s.created_at)),1),e("td",ne,[e("div",oe,[m(d(g),{href:d(c)("knowledge.show",s.id),class:"text-indigo-600 hover:text-indigo-900"},{default:p(()=>t[15]||(t[15]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])),_:2,__:[15]},1032,["href"]),m(d(g),{href:d(c)("knowledge.edit",s.id),class:"text-yellow-600 hover:text-yellow-900"},{default:p(()=>t[16]||(t[16]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])),_:2,__:[16]},1032,["href"]),e("button",{onClick:b=>j(s.id),class:"text-red-600 hover:text-red-900"},t[17]||(t[17]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,le)])])]))),128))])):f("",!0)])]),!n.knowledge||!n.knowledge.data||n.knowledge.data.length===0?(a(),l("div",re,t[19]||(t[19]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Tidak ada pengetahuan",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Mulai dengan menambahkan pengetahuan baru.",-1)]))):f("",!0)]),n.knowledge.links&&n.knowledge.links.length>1?(a(),l("div",ie,[e("nav",de,[e("div",ue,[(a(!0),l(h,null,k(n.knowledge.links,(s,b)=>(a(),_(d(g),{key:b,href:s.url||"#",class:S(["px-3 py-2 text-sm font-medium rounded-md",!s.url||s.url==="#"?"text-gray-400 cursor-not-allowed":s.active===!0?"bg-indigo-600 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"]),innerHTML:s.label||""},null,8,["href","class","innerHTML"]))),128))])])])):f("",!0)]),_:1},8,["user"]))}};export{xe as default};
