import{r as z,n as c,c as $,o as n,w as b,a as e,b as r,e as d,t as i,i as H,u as g,l as y,q as T,j as u,F as P,k as A,f as R,y as E,x as p}from"./app-AWowqXBy.js";import{_ as U}from"./AdminLayout-DB4E3WF6.js";import{r as f}from"./route-BVPoXIPw.js";import"./sidebar.esm-BsZbWdXb.js";const Y={class:"min-h-screen bg-gray-50"},J={class:"w-full mx-auto py-6 px-6"},Q={class:"px-0"},W={key:0,class:"mb-4"},X={class:"rounded-md bg-green-50 p-4 border border-green-200"},Z={class:"text-sm font-medium text-green-800"},ee={class:"mb-6 flex items-center justify-between"},te={class:"flex-1"},se={class:"text-3xl font-bold text-gray-900"},ne={class:"text-gray-600 mt-2"},ie={class:"hidden md:flex items-center gap-3"},oe={class:"flex gap-2"},re={key:1,class:"mb-6 bg-white rounded-lg shadow p-4"},de={class:"flex flex-wrap gap-3"},le=["disabled"],ae=["disabled"],ue=["disabled"],me=["disabled"],ce={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},ge={class:"lg:col-span-2 space-y-6"},fe={key:0,class:"bg-white shadow rounded-lg p-6"},ve={class:"text-gray-700 leading-relaxed"},xe={class:"bg-white shadow rounded-lg p-6"},he={class:"prose max-w-none text-gray-700 leading-relaxed whitespace-pre-wrap"},be={key:1,class:"bg-white shadow rounded-lg p-6"},pe={class:"text-gray-700 leading-relaxed whitespace-pre-wrap"},ye={key:2,class:"bg-white shadow rounded-lg p-6"},we={class:"space-y-3"},ke={class:"flex items-center space-x-3"},_e={class:"min-w-0 flex-1"},Ce={class:"text-sm font-medium text-gray-900 truncate"},je={class:"text-sm text-gray-500"},Me=["href"],Be={class:"space-y-6"},De={class:"bg-white shadow rounded-lg p-6"},Ve={class:"space-y-3"},Le={class:"text-sm text-gray-900"},Se={key:0},ze={class:"text-sm text-gray-900"},$e={key:1},He={class:"text-sm text-gray-900"},Te={class:"text-sm text-gray-900"},Pe={class:"text-sm text-gray-900"},Ae={key:0,class:"bg-white shadow rounded-lg p-6"},Ee={class:"space-y-3"},Fe={class:"text-sm font-medium text-gray-900"},Ne={key:0,class:"text-sm text-gray-600 mt-1"},Ie={key:1,class:"bg-white shadow rounded-lg p-6"},Ge={class:"flex flex-wrap gap-2"},Ke={key:2,class:"bg-white shadow rounded-lg p-6"},qe={class:"flex items-center space-x-3"},Oe={class:"flex-shrink-0"},Re={class:"w-10 h-10 bg-brand-500 rounded-full flex items-center justify-center"},Ue={class:"text-sm font-medium text-white"},Ye={class:"min-w-0 flex-1"},Je={class:"text-sm font-medium text-gray-900"},Qe={class:"text-sm text-gray-500"},We={class:"mt-3 text-center"},Xe={class:"items-center px-4 py-3"},Ze=["disabled"],et={key:0,class:"inline-block w-4 h-4 border-2 border-white/70 border-t-transparent rounded-full animate-spin mr-2"},ot={__name:"Show",props:{version:{type:Object,required:!0},user:{type:Object,default:()=>({})}},setup(s){const m=s,a=z(!1),v=z(!1),F=c(()=>["draft","pending_review"].includes(m.version.status)),N=c(()=>["draft","rejected"].includes(m.version.status)),I=c(()=>w.value||k.value||_.value||C.value),w=c(()=>["verified"].includes(m.version.status)),k=c(()=>["published"].includes(m.version.status)),_=c(()=>["pending_review"].includes(m.version.status)),C=c(()=>["pending_review"].includes(m.version.status));function j(o){return{draft:"Draft",pending_review:"Menunggu Review",verified:"Terverifikasi",published:"Dipublikasikan",archived:"Diarsipkan",rejected:"Ditolak"}[o]||o}function M(o){const t={draft:"inline-flex items-center rounded-full bg-gray-50 px-3 py-1 text-sm font-medium text-gray-700 border border-gray-100",pending_review:"inline-flex items-center rounded-full bg-yellow-50 px-3 py-1 text-sm font-medium text-yellow-700 border border-yellow-100",verified:"inline-flex items-center rounded-full bg-blue-50 px-3 py-1 text-sm font-medium text-blue-700 border border-blue-100",published:"inline-flex items-center rounded-full bg-green-50 px-3 py-1 text-sm font-medium text-green-700 border border-green-100",archived:"inline-flex items-center rounded-full bg-orange-50 px-3 py-1 text-sm font-medium text-orange-700 border border-orange-100",rejected:"inline-flex items-center rounded-full bg-red-50 px-3 py-1 text-sm font-medium text-red-700 border border-red-100"};return t[o]||t.draft}function B(o){return o?new Date(o).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}):"-"}function D(o){return o?new Date(o).toLocaleString("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}function G(o){if(!o)return"0 B";const t=["B","KB","MB","GB"],x=Math.floor(Math.log(o)/Math.log(1024));return Math.round(o/Math.pow(1024,x)*100)/100+" "+t[x]}function K(o){return o.split(" ").map(t=>t[0]).join("").toUpperCase().slice(0,2)}function q(){v.value=!0}function O(){a.value=!0,E.delete(f("admin.knowledge-versions.destroy",m.version.id),{onSuccess:()=>{p.success("Versi pengetahuan berhasil dihapus!")},onError:()=>{p.error("Gagal menghapus versi pengetahuan!")},onFinish:()=>{a.value=!1,v.value=!1}})}function h(o){a.value=!0,E.patch(f("admin.knowledge-versions.update-status",m.version.id),{status:o},{onSuccess:()=>{const t={published:"dipublikasikan",archived:"diarsipkan",verified:"diverifikasi",rejected:"ditolak"};p.success(`Versi pengetahuan berhasil ${t[o]}!`)},onError:()=>{p.error("Gagal mengupdate status versi pengetahuan!")},onFinish:()=>{a.value=!1}})}return(o,t)=>(n(),$(U,{"page-title":"Detail Versi Pengetahuan",user:s.user},{default:b(()=>{var x,V,L,S;return[e("div",Y,[e("div",J,[e("div",Q,[(x=o.$page.props.flash)!=null&&x.success?(n(),r("div",W,[e("div",X,[e("p",Z,i(o.$page.props.flash.success),1)])])):d("",!0),e("div",ee,[H(g(y),{href:g(f)("admin.knowledge-versions.index"),class:"text-brand-700 hover:text-brand-800 mr-4"},{default:b(()=>t[7]||(t[7]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),_:1,__:[7]},8,["href"]),e("div",te,[e("h1",se,i(s.version.title),1),e("p",ne,"Versi "+i(s.version.version_number)+" - "+i((V=s.version.knowledge)==null?void 0:V.title),1)]),e("div",ie,[e("span",{class:T(M(s.version.status))},i(j(s.version.status)),3),e("div",oe,[F.value?(n(),$(g(y),{key:0,href:g(f)("admin.knowledge-versions.edit",s.version.id),class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500"},{default:b(()=>t[8]||(t[8]=[e("svg",{class:"-ml-0.5 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),u(" Edit ",-1)])),_:1,__:[8]},8,["href"])):d("",!0),N.value?(n(),r("button",{key:1,onClick:q,class:"inline-flex items-center px-3 py-2 border border-red-300 shadow-sm text-sm leading-4 font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},t[9]||(t[9]=[e("svg",{class:"-ml-0.5 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),u(" Hapus ",-1)]))):d("",!0)])])]),I.value?(n(),r("div",re,[t[14]||(t[14]=e("h3",{class:"text-lg font-medium text-gray-900 mb-3"},"Aksi Status",-1)),e("div",de,[w.value?(n(),r("button",{key:0,onClick:t[0]||(t[0]=l=>h("published")),disabled:a.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50"},t[10]||(t[10]=[e("svg",{class:"-ml-1 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),u(" Publikasikan ",-1)]),8,le)):d("",!0),k.value?(n(),r("button",{key:1,onClick:t[1]||(t[1]=l=>h("archived")),disabled:a.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-yellow-600 hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 disabled:opacity-50"},t[11]||(t[11]=[e("svg",{class:"-ml-1 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 8l6 6 6-6"})],-1),u(" Arsipkan ",-1)]),8,ae)):d("",!0),_.value?(n(),r("button",{key:2,onClick:t[2]||(t[2]=l=>h("verified")),disabled:a.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50"},t[12]||(t[12]=[e("svg",{class:"-ml-1 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),u(" Verifikasi ",-1)]),8,ue)):d("",!0),C.value?(n(),r("button",{key:3,onClick:t[3]||(t[3]=l=>h("rejected")),disabled:a.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50"},t[13]||(t[13]=[e("svg",{class:"-ml-1 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),u(" Tolak ",-1)]),8,me)):d("",!0)])])):d("",!0),e("div",ce,[e("div",ge,[s.version.description?(n(),r("div",fe,[t[15]||(t[15]=e("h3",{class:"text-lg font-medium text-gray-900 mb-3"},"Deskripsi",-1)),e("p",ve,i(s.version.description),1)])):d("",!0),e("div",xe,[t[16]||(t[16]=e("h3",{class:"text-lg font-medium text-gray-900 mb-3"},"Konten",-1)),e("div",he,i(s.version.content),1)]),s.version.change_notes?(n(),r("div",be,[t[17]||(t[17]=e("h3",{class:"text-lg font-medium text-gray-900 mb-3"},"Catatan Perubahan",-1)),e("p",pe,i(s.version.change_notes),1)])):d("",!0),(L=s.version.attachments)!=null&&L.length?(n(),r("div",ye,[t[20]||(t[20]=e("h3",{class:"text-lg font-medium text-gray-900 mb-3"},"Lampiran",-1)),e("ul",we,[(n(!0),r(P,null,A(s.version.attachments,l=>(n(),r("li",{key:l.id,class:"flex items-center justify-between bg-gray-50 border rounded-lg px-4 py-3"},[e("div",ke,[t[18]||(t[18]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",_e,[e("p",Ce,i(l.original_name),1),e("p",je,i(G(l.file_size)),1)])]),e("a",{href:g(f)("admin.knowledge-versions.download-attachment",l.id),class:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-brand-700 bg-brand-100 hover:bg-brand-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500"},t[19]||(t[19]=[e("svg",{class:"-ml-0.5 mr-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),u(" Download ",-1)]),8,Me)]))),128))])])):d("",!0)]),e("div",Be,[e("div",De,[t[27]||(t[27]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Informasi Versi",-1)),e("dl",Ve,[e("div",null,[t[21]||(t[21]=e("dt",{class:"text-sm font-medium text-gray-500"},"Nomor Versi",-1)),e("dd",Le,i(s.version.version_number),1)]),e("div",null,[t[22]||(t[22]=e("dt",{class:"text-sm font-medium text-gray-500"},"Status",-1)),e("dd",null,[e("span",{class:T(M(s.version.status))},i(j(s.version.status)),3)])]),s.version.effective_date?(n(),r("div",Se,[t[23]||(t[23]=e("dt",{class:"text-sm font-medium text-gray-500"},"Tanggal Efektif",-1)),e("dd",ze,i(B(s.version.effective_date)),1)])):d("",!0),s.version.expiry_date?(n(),r("div",$e,[t[24]||(t[24]=e("dt",{class:"text-sm font-medium text-gray-500"},"Tanggal Kadaluarsa",-1)),e("dd",He,i(B(s.version.expiry_date)),1)])):d("",!0),e("div",null,[t[25]||(t[25]=e("dt",{class:"text-sm font-medium text-gray-500"},"Dibuat",-1)),e("dd",Te,i(D(s.version.created_at)),1)]),e("div",null,[t[26]||(t[26]=e("dt",{class:"text-sm font-medium text-gray-500"},"Diperbarui",-1)),e("dd",Pe,i(D(s.version.updated_at)),1)])])]),s.version.knowledge?(n(),r("div",Ae,[t[29]||(t[29]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Pengetahuan Terkait",-1)),e("div",Ee,[e("div",null,[e("h4",Fe,i(s.version.knowledge.title),1),s.version.knowledge.description?(n(),r("p",Ne,i(s.version.knowledge.description),1)):d("",!0)]),H(g(y),{href:g(f)("admin.knowledge.show",s.version.knowledge.id),class:"inline-flex items-center text-sm text-brand-600 hover:text-brand-500"},{default:b(()=>t[28]||(t[28]=[u(" Lihat Pengetahuan ",-1),e("svg",{class:"ml-1 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1)])),_:1,__:[28]},8,["href"])])])):d("",!0),(S=s.version.tags)!=null&&S.length?(n(),r("div",Ie,[t[30]||(t[30]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Tags",-1)),e("div",Ge,[(n(!0),r(P,null,A(s.version.tags,l=>(n(),r("span",{key:l.id,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-brand-100 text-brand-800"},i(l.name),1))),128))])])):d("",!0),s.version.created_by_user?(n(),r("div",Ke,[t[31]||(t[31]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Pembuat",-1)),e("div",qe,[e("div",Oe,[e("div",Re,[e("span",Ue,i(K(s.version.created_by_user.name)),1)])]),e("div",Ye,[e("p",Je,i(s.version.created_by_user.name),1),e("p",Qe,i(s.version.created_by_user.email),1)])])])):d("",!0)])])])])]),v.value?(n(),r("div",{key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",onClick:t[6]||(t[6]=l=>v.value=!1)},[e("div",{class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",onClick:t[5]||(t[5]=R(()=>{},["stop"]))},[e("div",We,[t[32]||(t[32]=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[e("svg",{class:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),t[33]||(t[33]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 mt-2"},"Hapus Versi Pengetahuan",-1)),t[34]||(t[34]=e("div",{class:"mt-2 px-7 py-3"},[e("p",{class:"text-sm text-gray-500"},"Apakah Anda yakin ingin menghapus versi ini? Tindakan ini tidak dapat dibatalkan.")],-1)),e("div",Xe,[e("button",{onClick:O,disabled:a.value,class:"px-4 py-2 bg-red-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-300 disabled:opacity-50 mr-2"},[a.value?(n(),r("span",et)):d("",!0),u(" "+i(a.value?"Menghapus...":"Ya, Hapus"),1)],8,Ze),e("button",{onClick:t[4]||(t[4]=l=>v.value=!1),class:"px-4 py-2 bg-gray-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-300 mt-2"}," Batal ")])])])])):d("",!0)]}),_:1},8,["user"]))}};export{ot as default};
