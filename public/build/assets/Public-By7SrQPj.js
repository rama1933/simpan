import{b as o,o as l,a as t,t as i,G as Z,n as T,r as y,c as k,w as S,i as j,e as c,j as d,q as w,g as A,v as L,F as f,k as b,u as V,l as M,y as U,h as ee}from"./app-Csu41_Kp.js";import{_ as N}from"./VueSelect.vue_vue_type_script_setup_true_lang-CDBjgkUk.js";import{_ as te}from"./PublicLayout-JD310xBN.js";import{r as se}from"./route-B4Jpo0AN.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";const le={class:"mb-8"},oe={class:"text-3xl font-bold text-gray-900 mb-2"},re={class:"text-gray-600"},ae={__name:"PublicPageHeader",props:{title:{type:String,required:!0},description:{type:String,default:""}},setup(a){return(g,r)=>(l(),o("div",le,[t("h1",oe,i(a.title),1),t("p",re,i(a.description),1)]))}},ie={class:"bg-white p-6 rounded-xl shadow-md ring-1 ring-gray-100 mb-8"},de={class:"flex items-center justify-between mb-6"},ue={class:"flex space-x-3"},ce=["disabled"],ge={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4"},me={class:"space-y-2"},xe={class:"relative"},pe={class:"space-y-2"},fe={class:"space-y-2"},ve={class:"space-y-2 md:col-span-2"},be={key:0,class:"mt-2"},he={class:"flex flex-wrap gap-2 max-h-32 overflow-y-auto"},ye=["onClick"],ke={key:0,class:"ml-1"},we={key:1,class:"mt-3"},_e={class:"text-xs text-gray-500 mb-2"},Ce={class:"flex flex-wrap gap-2"},Te=["onClick"],Se={key:0,class:"mt-4 pt-4 border-t border-gray-100"},je={class:"flex items-center space-x-2"},Ve={class:"flex flex-wrap gap-2"},Me={key:0,class:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Pe={key:1,class:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"},$e={key:2,class:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},De={key:3,class:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800"},Be={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ke=["onClick"],He={class:"p-6"},ze={class:"flex items-center justify-between mb-3"},Fe={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Ae={class:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2"},Le={class:"text-gray-600 text-sm mb-4 line-clamp-3"},Ue={class:"flex items-center justify-between text-xs text-gray-500"},Ne={class:"flex items-center space-x-4"},Oe={class:"flex items-center"},Ie={class:"flex items-center"},qe={key:0,class:"mt-3 flex flex-wrap gap-1"},Ee={key:0,class:"text-xs text-gray-500"},Ge={key:1,class:"text-center py-12"},Je={key:2,class:"mt-8"},Qe={class:"flex items-center justify-between"},Re={class:"flex-1 flex justify-between sm:hidden"},We={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Xe={class:"text-sm text-gray-700"},Ye={class:"font-medium"},Ze={class:"font-medium"},et={class:"font-medium"},tt={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},st=["innerHTML"],nt={__name:"Public",props:{knowledge:Object,filters:Object,categories:Array,skpds:Array},setup(a){var D,B,K,H;const g=a,r=Z({search:((D=g.filters)==null?void 0:D.search)||"",category_id:((B=g.filters)==null?void 0:B.category_id)||"",skpd_id:((K=g.filters)==null?void 0:K.skpd_id)||""}),O=T(()=>{const n=[{value:"",label:"Semua Kategori"}];return g.categories&&n.push(...g.categories.map(e=>({value:e.id,label:e.name}))),n}),I=T(()=>{const n=[{value:"",label:"Semua SKPD"}];return g.skpds&&n.push(...g.skpds.map(e=>({value:e.id,label:e.nama_skpd}))),n}),v=y(""),u=y(Array.isArray((H=g.filters)==null?void 0:H.tags)?g.filters.tags:[]),x=y([]),p=y([]),h=()=>{const n={...r,tags:u.value.length>0?u.value:void 0};Object.keys(n).forEach(e=>{(n[e]===""||n[e]===null||n[e]===void 0)&&delete n[e]}),U.get("/knowledge/public",n,{preserveState:!0,preserveScroll:!0})},q=()=>{r.search="",r.category_id="",r.skpd_id="",u.value=[],p.value=[],v.value="",x.value=[],h()},E=n=>{const e=x.value.find(m=>m.id===n);if(e)return e.name;const s=p.value.find(m=>m.id===n);return(s==null?void 0:s.name)||`Tag ${n}`},P=n=>{u.value=u.value.filter(e=>e!==n),p.value=p.value.filter(e=>e.id!==n),h()},G=n=>{u.value.includes(n.id)?P(n.id):(u.value.push(n.id),p.value.find(e=>e.id===n.id)||p.value.push(n),h())},J=async()=>{if(v.value.length<2){x.value=[];return}try{const n=await ee.get("/api/knowledge/tags",{params:{q:v.value}});x.value=n.data.data||[]}catch(n){console.error("Error searching tags:",n),x.value=[]}};let $=null;const Q=()=>{clearTimeout($),$=setTimeout(()=>{J()},300)},R=n=>{U.visit(se("knowledge.public.show",n))},W=n=>new Date(n).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}),_=T(()=>r.search||r.category_id||r.skpd_id||u.value.length>0),X=n=>{var s;const e=(s=g.categories)==null?void 0:s.find(m=>m.id==n);return(e==null?void 0:e.name)||"Unknown"},Y=n=>{var s;const e=(s=g.skpds)==null?void 0:s.find(m=>m.id==n);return(e==null?void 0:e.nama_skpd)||"Unknown"};return(n,e)=>(l(),k(te,null,{default:S(()=>[j(ae,{title:"Temukan Pengetahuan",description:"Jelajahi koleksi pengetahuan yang telah terverifikasi dari Pemerintah Kabupaten Hulu Sungai Selatan"}),t("div",ie,[t("div",de,[e[10]||(e[10]=t("div",null,[t("h3",{class:"text-lg font-semibold text-gray-900"},"Filter Data"),t("p",{class:"text-sm text-gray-500 mt-1"},"Saring data berdasarkan kriteria yang diinginkan")],-1)),t("div",ue,[t("button",{onClick:h,class:"inline-flex items-center px-4 py-2 text-sm font-semibold text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 shadow-sm"},e[8]||(e[8]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z"})],-1),d(" Filter Data ",-1)])),t("button",{onClick:q,disabled:!_.value,class:w(["inline-flex items-center px-4 py-2 text-sm font-medium rounded-lg border transition-all duration-200",_.value?"text-gray-600 bg-gray-50 border-gray-300 hover:bg-gray-100 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 shadow-sm":"text-gray-400 bg-gray-100 border-gray-200 cursor-not-allowed"])},e[9]||(e[9]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),d(" Hapus Filter ",-1)]),10,ce)])]),t("div",ge,[t("div",me,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700"},"Cari",-1)),t("div",xe,[e[11]||(e[11]=t("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),A(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>r.search=s),type:"text",placeholder:"Cari judul atau konten...",class:"w-full pl-10 pr-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 hover:border-gray-400 transition-colors duration-200"},null,512),[[L,r.search]])])]),t("div",pe,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700"},"Kategori",-1)),j(N,{modelValue:r.category_id,"onUpdate:modelValue":e[1]||(e[1]=s=>r.category_id=s),options:O.value,placeholder:"Pilih Kategori..."},null,8,["modelValue","options"])]),t("div",fe,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700"},"SKPD",-1)),j(N,{modelValue:r.skpd_id,"onUpdate:modelValue":e[2]||(e[2]=s=>r.skpd_id=s),options:I.value,placeholder:"Pilih SKPD..."},null,8,["modelValue","options"])]),t("div",ve,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700"},"Tags",-1)),A(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>v.value=s),onInput:Q,type:"text",placeholder:"Cari tag...",class:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 hover:border-gray-400 transition-colors duration-200"},null,544),[[L,v.value]]),x.value.length>0?(l(),o("div",be,[e[15]||(e[15]=t("div",{class:"text-xs text-gray-500 mb-2"},"Pilih tag:",-1)),t("div",he,[(l(!0),o(f,null,b(x.value,s=>(l(),o("button",{key:s.id,type:"button",onClick:m=>G(s),class:w([u.value.includes(s.id)?"bg-blue-600 text-white border-blue-600":"bg-gray-100 text-gray-700 hover:bg-gray-200 border-gray-200","px-2.5 py-1.5 text-xs rounded-md border transition-colors duration-200"])},[d(i(s.name)+" ",1),u.value.includes(s.id)?(l(),o("span",ke,"✓")):c("",!0)],10,ye))),128))])])):c("",!0),u.value.length?(l(),o("div",we,[t("div",_e,"Tag terpilih ("+i(u.value.length)+"):",1),t("div",Ce,[(l(!0),o(f,null,b(u.value,s=>(l(),o("span",{key:`sel-${s}`,class:"inline-flex items-center px-2.5 py-1 rounded-full text-xs bg-indigo-100 text-indigo-800"},[d(i(E(s))+" ",1),t("button",{class:"ml-1.5 text-indigo-600 hover:text-indigo-800 font-medium",onClick:m=>P(s)},"×",8,Te)]))),128))])])):c("",!0)])]),_.value?(l(),o("div",Se,[t("div",je,[e[17]||(e[17]=t("span",{class:"text-sm text-gray-500"},"Filter aktif:",-1)),t("div",Ve,[r.search?(l(),o("span",Me,[d(" Search: "+i(r.search)+" ",1),t("button",{onClick:e[4]||(e[4]=s=>r.search=""),class:"ml-1.5 text-blue-700 hover:text-blue-900"}," × ")])):c("",!0),r.category_id?(l(),o("span",Pe,[d(" Kategori: "+i(X(r.category_id))+" ",1),t("button",{onClick:e[5]||(e[5]=s=>r.category_id=""),class:"ml-1.5 text-green-600 hover:text-green-800"}," × ")])):c("",!0),r.skpd_id?(l(),o("span",$e,[d(" SKPD: "+i(Y(r.skpd_id))+" ",1),t("button",{onClick:e[6]||(e[6]=s=>r.skpd_id=""),class:"ml-1.5 text-purple-600 hover:text-purple-800"}," × ")])):c("",!0),u.value.length>0?(l(),o("span",De,[d(" Tags: "+i(u.value.length)+" dipilih ",1),t("button",{onClick:e[7]||(e[7]=s=>{u.value=[],p.value=[]}),class:"ml-1.5 text-indigo-600 hover:text-indigo-800"}," × ")])):c("",!0)])])])):c("",!0)]),a.knowledge&&a.knowledge.data&&a.knowledge.data.length>0?(l(),o("div",Be,[(l(!0),o(f,null,b(a.knowledge.data,s=>{var m,z,F;return l(),o("div",{key:s.id,class:"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow cursor-pointer",onClick:C=>R(s.id)},[t("div",He,[t("div",ze,[t("span",Fe,i(((m=s.category)==null?void 0:m.name)||"Umum"),1),e[18]||(e[18]=t("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"}," Terverifikasi ",-1))]),t("h3",Ae,i(s.title),1),t("p",Le,i(s.description||"Tidak ada deskripsi"),1),t("div",Ue,[t("div",Ne,[t("span",Oe,[e[19]||(e[19]=t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),d(" "+i(((z=s.author)==null?void 0:z.name)||"Unknown"),1)]),t("span",Ie,[e[20]||(e[20]=t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)),d(" "+i(((F=s.skpd)==null?void 0:F.nama_skpd)||"SKPD"),1)])]),t("div",null,i(W(s.created_at)),1)]),s.tags_relation&&s.tags_relation.length>0?(l(),o("div",qe,[(l(!0),o(f,null,b(s.tags_relation.slice(0,3),C=>(l(),o("span",{key:C.id,class:"inline-flex items-center px-2 py-1 rounded text-xs bg-blue-100 text-blue-800"},[e[21]||(e[21]=t("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1)),d(" "+i(C.name),1)]))),128)),s.tags_relation.length>3?(l(),o("span",Ee," +"+i(s.tags_relation.length-3)+" lainnya ",1)):c("",!0)])):c("",!0)])],8,Ke)}),128))])):(l(),o("div",Ge,e[22]||(e[22]=[t("div",{class:"w-24 h-24 mx-auto mb-4 text-gray-300"},[t("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1),t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Tidak ada pengetahuan ditemukan",-1),t("p",{class:"text-gray-600"},"Coba ubah filter pencarian atau kata kunci Anda.",-1)]))),a.knowledge&&a.knowledge.data&&a.knowledge.data.length>0&&a.knowledge.links&&a.knowledge.links.length>0?(l(),o("div",Je,[t("nav",Qe,[t("div",Re,[a.knowledge.prev_page_url?(l(),k(V(M),{key:0,href:a.knowledge.prev_page_url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:S(()=>e[23]||(e[23]=[d(" Sebelumnya ",-1)])),_:1,__:[23]},8,["href"])):c("",!0),a.knowledge.next_page_url?(l(),k(V(M),{key:1,href:a.knowledge.next_page_url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:S(()=>e[24]||(e[24]=[d(" Selanjutnya ",-1)])),_:1,__:[24]},8,["href"])):c("",!0)]),t("div",We,[t("div",null,[t("p",Xe,[e[25]||(e[25]=d(" Menampilkan ",-1)),t("span",Ye,i(a.knowledge.from),1),e[26]||(e[26]=d(" sampai ",-1)),t("span",Ze,i(a.knowledge.to),1),e[27]||(e[27]=d(" dari ",-1)),t("span",et,i(a.knowledge.total),1),e[28]||(e[28]=d(" hasil ",-1))])]),t("div",null,[t("nav",tt,[(l(!0),o(f,null,b(a.knowledge.links,s=>(l(),o(f,{key:s.label},[s.url?(l(),k(V(M),{key:0,href:s.url,class:w(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",s.active?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"]),"preserve-scroll":!0,innerHTML:s.label},null,8,["href","class","innerHTML"])):(l(),o("span",{key:1,class:w(["relative inline-flex items-center px-4 py-2 border text-sm font-medium","bg-gray-100 border-gray-300 text-gray-400 cursor-not-allowed"]),innerHTML:s.label},null,8,st))],64))),128))])])])])])):c("",!0)]),_:1}))}},dt=ne(nt,[["__scopeId","data-v-34d51a21"]]);export{dt as default};
