import{P as H,r as m,q as V,R as N,s as P,K as h,n as O,b as p,o as l,a as e,i as k,t as c,w as u,j as T,u as i,l as g,F as C,k as A,c as W,x as K,Q as E,e as F,S as I}from"./app-BVYVdaoR.js";import{r as o}from"./route-BA7VisEj.js";import{s as R}from"./sidebar.esm-B-fVakm-.js";const $={class:"min-h-screen bg-gradient-to-b from-white to-brand-50 text-gray-900"},q={class:"md:hidden sticky top-0 z-50 bg-white/80 backdrop-blur border-b border-brand-100"},Q={class:"flex items-center justify-between px-4 py-3"},G={class:"flex items-center gap-2"},J={class:"text-base font-semibold"},X={class:"space-y-1"},Y={class:"font-medium"},Z={class:"flex"},ee={class:"hidden md:block fixed inset-y-0 left-0 z-40 w-72 border-r border-brand-100 bg-white/85 backdrop-blur"},se={class:"h-full flex flex-col"},te={class:"flex-1 overflow-y-auto py-3"},re={class:"px-3 space-y-1"},ne={class:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},oe=["d"],ae={class:"font-medium"},ie={class:"h-9 w-9 rounded-full bg-gradient-to-br from-brand-500 to-brand-700 text-white flex items-center justify-center text-sm font-semibold"},de={class:"min-w-0 text-left flex-1"},le={class:"text-sm font-semibold truncate"},ce={class:"text-xs text-brand-700"},ue={class:"flex-1 min-w-0 md:ml-72"},be={class:"hidden md:flex items-center justify-between sticky top-0 z-30 bg-white/80 backdrop-blur border-b border-brand-100 px-6 h-16"},fe={class:"text-xl font-semibold"},he={class:"p-4 md:p-6"},me={class:"mx-auto max-w-[1400px]"},xe={__name:"AdminLayout",props:{pageTitle:{type:String,default:"Dashboard"},user:{type:Object,default:null}},setup(b){const L=b,v=H(),w=m(!1),x=m(!1),y=m(null),U=m(null),D=m(null);function M(t){const s=y.value;s&&(s.contains(t.target)||(x.value=!1))}V(()=>{document.addEventListener("click",M)}),N(()=>{document.removeEventListener("click",M)});const S=P(()=>{var j,B;const t=v.url||"",s=L.user||((B=(j=v.props)==null?void 0:j.auth)==null?void 0:B.user),n=((s==null?void 0:s.roles)||[]).map(_=>typeof _=="string"?_:_.name),d=n.includes("Admin"),r=n.includes("User SKPD");return d?[{label:"Dashboard",href:o("admin.dashboard"),active:String(t).startsWith("/admin")&&(t===o("admin.dashboard")||t==="/admin/dashboard"),icon:"dashboard"},{label:"Knowledge Management",href:o("admin.knowledge.index"),active:String(t).startsWith("/admin/knowledge"),icon:"doc"},{label:"User Management",href:o("admin.users.index"),active:String(t).startsWith("/admin/users"),icon:"users"},{label:"AI Assistant",href:o("admin.ai.index"),active:String(t).startsWith("/admin/ai"),icon:"ai"}]:r?[{label:"Dashboard",href:o("dashboard.skpd"),active:t===o("dashboard.skpd")||String(t).startsWith("/dashboard/skpd"),icon:"dashboard"},{label:"Knowledge SKPD",href:o("skpd.knowledge.index"),active:String(t).startsWith("/skpd/knowledge"),icon:"doc"},{label:"AI Assistant",href:o("ai.index"),active:String(t).startsWith("/ai"),icon:"ai"}]:[]}),z={dashboard:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z",doc:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",users:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z",ai:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"};function f(t){return typeof t=="function"?t():t}return V(()=>{var d;const t=((d=v.props)==null?void 0:d.flash)||{},s=f(t.success),a=f(t.error),n=f(t.message);s&&h.success(s),a&&h.error(a),n&&h.info(n)}),O(()=>{var t;return(t=v.props)==null?void 0:t.flash},t=>{if(!t)return;const s=f(t.success),a=f(t.error),n=f(t.message);s&&h.success(s),a&&h.error(a),n&&h.info(n)},{deep:!0}),(t,s)=>{var a,n,d;return l(),p("div",$,[e("div",q,[e("div",Q,[e("button",{onClick:s[0]||(s[0]=r=>w.value=!0),class:"p-2 rounded-md text-brand-700 hover:bg-brand-50"},s[3]||(s[3]=[e("i",{class:"pi pi-bars text-lg"},null,-1)])),e("div",G,[e("span",J,c(b.pageTitle),1)]),k(i(g),{href:i(o)("logout"),method:"post",as:"button",class:"px-3 py-1.5 rounded-md text-sm text-white bg-brand-700 hover:bg-brand-800"},{default:u(()=>s[4]||(s[4]=[T("Logout",-1)])),_:1,__:[4]},8,["href"])])]),k(i(R),{visible:w.value,"onUpdate:visible":s[1]||(s[1]=r=>w.value=r),position:"left",class:"md:hidden"},{header:u(()=>s[5]||(s[5]=[e("div",{class:"text-lg font-semibold"},"KMS Admin",-1)])),default:u(()=>[e("div",X,[(l(!0),p(C,null,A(S.value,r=>(l(),W(i(g),{key:r.href,href:r.href,class:K(["flex items-center gap-3 px-3 py-2 rounded-lg text-sm",r.active?"bg-brand-50 text-brand-700":"text-gray-700 hover:bg-brand-50 hover:text-brand-700"])},{default:u(()=>[s[6]||(s[6]=e("i",{class:"pi pi-angle-right text-sm"},null,-1)),e("span",Y,c(r.label),1)]),_:2,__:[6]},1032,["href","class"]))),128))])]),_:1},8,["visible"]),e("div",Z,[e("div",ee,[e("aside",se,[s[10]||(s[10]=E('<div class="h-16 bg-gradient-to-r from-brand-700 to-brand-600 text-white flex items-center px-5"><div class="h-8 w-8 mr-3 rounded-lg bg-white/10 flex items-center justify-center"><svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3l7 4v6c0 5-7 8-7 8s-7-3-7-8V7l7-4z"></path></svg></div><div class="text-lg font-semibold tracking-wide">KMS Admin</div></div>',1)),e("nav",te,[e("div",re,[(l(!0),p(C,null,A(S.value,r=>(l(),W(i(g),{key:r.href,href:r.href,class:K(["flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors",r.active?"bg-brand-50 text-brand-700 border border-brand-100":"text-gray-700 hover:bg-brand-50 hover:text-brand-700"])},{default:u(()=>[(l(),p("svg",ne,[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:z[r.icon]||z.dashboard},null,8,oe)])),e("span",ae,c(r.label),1)]),_:2},1032,["href","class"]))),128))])]),e("div",{class:"px-4 py-3 border-t border-brand-100 bg-white/70 relative",ref_key:"userMenuWrapper",ref:y},[e("button",{onClick:s[2]||(s[2]=r=>x.value=!x.value),ref_key:"userMenuButton",ref:D,class:"w-full flex items-center gap-2 rounded-md hover:bg-brand-50 px-2 py-1.5"},[e("div",ie,c((((a=b.user)==null?void 0:a.name)||"U").slice(0,1)),1),e("div",de,[e("div",le,c(((n=b.user)==null?void 0:n.name)||"User"),1),e("div",ce,c((((d=b.user)==null?void 0:d.roles)||[]).join(", ")||"User"),1)]),s[7]||(s[7]=e("svg",{class:"w-4 h-4 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M5.23 7.21a.75.75 0 011.06.02L10 11.14l3.71-3.91a.75.75 0 111.08 1.04l-4.24 4.46a.75.75 0 01-1.08 0L5.21 8.27a.75.75 0 01.02-1.06z"})],-1))],512),x.value?(l(),p("div",{key:0,ref_key:"userMenu",ref:U,class:"absolute right-3 bottom-14 z-50 w-48 rounded-lg bg-white shadow-lg border border-brand-100 overflow-hidden"},[k(i(g),{href:"/settings",class:"flex items-center gap-2 px-3 py-2 text-sm text-gray-700 hover:bg-brand-50"},{default:u(()=>s[8]||(s[8]=[e("svg",{class:"w-4 h-4 text-gray-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8a4 4 0 100 8 4 4 0 000-8z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.93 4.93l2.12 2.12M16.95 4.93l-2.12 2.12M4.93 19.07l2.12-2.12M16.95 19.07l-2.12-2.12M3 12h3M18 12h3M12 3v3M12 18v3"})],-1),e("span",null,"Setting",-1)])),_:1,__:[8]}),k(i(g),{href:i(o)("logout"),method:"post",as:"button",class:"w-full flex items-center gap-2 px-3 py-2 text-sm text-rose-700 hover:bg-rose-50"},{default:u(()=>s[9]||(s[9]=[e("svg",{class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12H3m12 0l-4-4m4 4l-4 4m6-9V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2h8a2 2 0 002-2v-2"})],-1),e("span",null,"Logout",-1)])),_:1,__:[9]},8,["href"])],512)):F("",!0)],512)])]),e("div",ue,[e("div",be,[e("span",fe,c(b.pageTitle),1)]),e("main",he,[e("div",me,[I(t.$slots,"default")])])])])])}}};export{xe as _};
