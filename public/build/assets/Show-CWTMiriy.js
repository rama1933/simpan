import{d as W,S as X,n as Y,r as f,O as Z,c as ee,o as r,w as v,a as e,b as d,e as p,t as i,u as s,i as $,l as E,j as c,q as G,F as q,k as I,g as te,v as se,h as oe,x as y}from"./app-BlsBPza5.js";import"./marked.esm-DBt4pWCB.js";const ae={class:"max-w-4xl mx-auto space-y-6"},le={class:"flex items-center justify-between"},ne={class:"text-2xl font-bold text-gray-900"},ie={class:"text-gray-600 mt-1"},re={class:"flex items-center space-x-3"},de={class:"bg-white rounded-xl shadow-sm border border-gray-100 p-6"},ue={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6"},me={class:"text-gray-900"},ge={class:"text-gray-900"},pe={class:"text-gray-900"},ce={class:"text-gray-900"},xe={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},be={class:"flex items-center space-x-2"},fe={class:"flex flex-wrap gap-1"},ve={class:"bg-white rounded-xl shadow-sm border border-gray-100 p-6"},ye=["innerHTML"],he={key:0,class:"bg-white rounded-xl shadow-sm border border-gray-100 p-6"},ke={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},we={class:"flex-1"},_e={class:"text-sm font-medium text-gray-900"},Ve={class:"text-xs text-gray-500"},Ce=["href"],Be={key:1,class:"bg-white rounded-xl shadow-sm border border-gray-100 p-6"},Me={class:"flex gap-2"},Se=["disabled"],Te={key:0,class:"animate-spin inline-block h-4 w-4 border-2 border-white border-t-transparent rounded-full mr-2"},De=["disabled"],je={key:0,class:"animate-spin inline-block h-4 w-4 border-2 border-white border-t-transparent rounded-full mr-2"},Fe=W({__name:"Show",props:{knowledge:{},user:{},canVerify:{type:Boolean}},setup(O){var k,w;const x=O,a=x.knowledge,U=x.user||((w=(k=X().props)==null?void 0:k.auth)==null?void 0:w.user)||null,J=Y(()=>!!x.canVerify),b=f(""),u=f(!1),g=f(null),Q=o=>o?new Date(o).toLocaleString("id-ID"):"-",h=async o=>{var t,m;u.value=!0,g.value=o;try{const l=await oe.post(`/admin/knowledge/${a.id}/verify`,{type:o,note:b.value});(t=l==null?void 0:l.data)!=null&&t.success?y.success("Verifikasi tersimpan"):y.info(((m=l==null?void 0:l.data)==null?void 0:m.message)||"Verifikasi diproses"),setTimeout(()=>window.location.reload(),300)}catch{y.error("Gagal menyimpan verifikasi")}finally{u.value=!1,g.value=null}},R=o=>{if(o===0)return"0 Bytes";const t=1024,m=["Bytes","KB","MB","GB"],l=Math.floor(Math.log(o)/Math.log(t));return parseFloat((o/Math.pow(t,l)).toFixed(2))+" "+m[l]};return(o,t)=>{const m=Z("AdminLayout");return r(),ee(m,{"page-title":"Detail Pengetahuan",user:s(U)},{default:v(()=>{var l,_,V,C,B,M,S,T,D,j,L,z,F,H,K,N,A,P;return[e("div",ae,[e("div",le,[e("div",null,[e("h1",ne,i((l=s(a))==null?void 0:l.title),1),e("p",ie,i((_=s(a))==null?void 0:_.description),1)]),e("div",re,[$(s(E),{href:o.route("knowledge.index"),class:"inline-flex items-center gap-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors"},{default:v(()=>t[3]||(t[3]=[e("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),c(" Kembali ",-1)])),_:1,__:[3]},8,["href"]),$(s(E),{href:o.route("knowledge.edit",(V=s(a))==null?void 0:V.id),class:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},{default:v(()=>t[4]||(t[4]=[e("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),c(" Edit ",-1)])),_:1,__:[4]},8,["href"])])]),e("div",de,[e("div",ue,[e("div",null,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Kategori",-1)),e("p",me,i((B=(C=s(a))==null?void 0:C.category)==null?void 0:B.name),1)]),e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Penulis",-1)),e("p",ge,i((S=(M=s(a))==null?void 0:M.author)==null?void 0:S.name),1)]),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"SKPD",-1)),e("p",pe,i((D=(T=s(a))==null?void 0:T.skpd)==null?void 0:D.nama_skpd),1)]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Tanggal Dibuat",-1)),e("p",ce,i(Q((j=s(a))==null?void 0:j.created_at)),1)])]),e("div",xe,[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Status",-1)),e("span",{class:G([o.getStatusClass((L=s(a))==null?void 0:L.status),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},i(o.getStatusText((z=s(a))==null?void 0:z.status)),3)]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Status Verifikasi",-1)),e("div",be,[e("span",{class:G([o.getVerificationClass((F=s(a))==null?void 0:F.verification_status),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},i(o.getVerificationText((H=s(a))==null?void 0:H.verification_status)),3)])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Tags",-1)),e("div",fe,[(r(!0),d(q,null,I((K=s(a))==null?void 0:K.tags,n=>(r(),d("span",{key:n,class:"inline-flex px-2 py-1 text-xs font-medium bg-brand-100 text-brand-800 rounded-full"},i(n),1))),128))])])])]),e("div",ve,[t[12]||(t[12]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Konten",-1)),e("div",{class:"prose max-w-none",innerHTML:o.renderedContent},null,8,ye)]),(A=(N=s(a))==null?void 0:N.attachments)!=null&&A.length?(r(),d("div",he,[t[14]||(t[14]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Lampiran",-1)),e("div",ke,[(r(!0),d(q,null,I(s(a).attachments,n=>(r(),d("div",{key:n.id,class:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50"},[t[13]||(t[13]=e("svg",{class:"w-8 h-8 text-gray-400 mr-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e("div",we,[e("p",_e,i(n.original_name),1),e("p",Ve,i(R(n.size_bytes)),1)]),e("a",{href:`/storage/${n.path}`,target:"_blank",class:"text-brand-600 hover:text-brand-800 text-sm font-medium"}," Download ",8,Ce)]))),128))])])):p("",!0),((P=s(a))==null?void 0:P.verification_status)==="pending"&&J.value?(r(),d("div",Be,[t[17]||(t[17]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Verifikasi (Admin)",-1)),te(e("textarea",{"onUpdate:modelValue":t[0]||(t[0]=n=>b.value=n),rows:"3",class:"w-full border rounded-md px-3 py-2 mb-4",placeholder:"Catatan verifikasi (opsional)"},null,512),[[se,b.value]]),e("div",Me,[e("button",{disabled:u.value,onClick:t[1]||(t[1]=n=>h("approve")),class:"px-3 py-2 rounded-md bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-50"},[u.value&&g.value==="approve"?(r(),d("span",Te)):p("",!0),t[15]||(t[15]=c(" Setujui ",-1))],8,Se),e("button",{disabled:u.value,onClick:t[2]||(t[2]=n=>h("reject")),class:"px-3 py-2 rounded-md bg-rose-600 text-white hover:bg-rose-700 disabled:opacity-50"},[u.value&&g.value==="reject"?(r(),d("span",je)):p("",!0),t[16]||(t[16]=c(" Tolak ",-1))],8,De)])])):p("",!0)])]}),_:1},8,["user"])}}});export{Fe as default};
