import{S as P,r as m,A as j,U as K,p as I,l as b,n as T,b as g,o as l,a as t,i as x,t as c,w as u,k as O,u as d,j as v,F as B,m as C,c as U,s as W,D as E,e as F,T as R}from"./app-CtXwnPDK.js";import{r as a}from"./route-BVPoXIPw.js";import{s as $}from"./sidebar.esm-BVgX1l_v.js";const q={class:"min-h-screen bg-gradient-to-b from-white to-brand-50 text-gray-900"},G={class:"md:hidden sticky top-0 z-50 bg-white/80 backdrop-blur border-b border-brand-100"},J={class:"flex items-center justify-between px-4 py-3"},Q={class:"flex items-center gap-2"},X={class:"text-base font-semibold"},Y={class:"space-y-1"},Z={class:"font-medium"},ee={class:"flex"},se={class:"hidden md:block fixed inset-y-0 left-0 z-40 w-72 border-r border-brand-100 bg-white/85 backdrop-blur"},te={class:"h-full flex flex-col"},re={class:"flex-1 overflow-y-auto py-3"},ne={class:"px-3 space-y-1"},ae={class:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},oe=["d"],ie={class:"font-medium"},de={class:"h-9 w-9 rounded-full bg-gradient-to-br from-brand-500 to-brand-700 text-white flex items-center justify-center text-sm font-semibold"},le={class:"min-w-0 text-left flex-1"},ce={class:"text-sm font-semibold truncate"},ue={class:"text-xs text-brand-700"},he={class:"flex-1 min-w-0 md:ml-72"},fe={class:"hidden md:flex items-center justify-between sticky top-0 z-30 bg-white/80 backdrop-blur border-b border-brand-100 px-6 h-16"},be={class:"text-xl font-semibold"},me={class:"p-4 md:p-6"},ge={class:"mx-auto max-w-[1400px]"},ke={__name:"AdminLayout",props:{pageTitle:{type:String,default:"Dashboard"},user:{type:Object,default:null}},setup(h){const A=h,i=P(),k=m(!1),p=m(!1),_=m(null),N=m(null),L=m(null);function y(s){const e=_.value;e&&(e.contains(s.target)||(p.value=!1))}j(()=>{document.addEventListener("click",y)}),K(()=>{document.removeEventListener("click",y)});const M=I(()=>{var V,z;const s=(i==null?void 0:i.url)||"",e=A.user||((z=(V=i==null?void 0:i.props)==null?void 0:V.auth)==null?void 0:z.user),o=((e==null?void 0:e.roles)||[]).map(w=>typeof w=="string"?w:w.name),r=o.includes("Admin"),H=o.includes("User SKPD");return r?[{label:"Dashboard",href:a("admin.dashboard"),active:String(s).startsWith("/admin")&&(s===a("admin.dashboard")||s==="/admin/dashboard"),icon:"dashboard"},{label:"Knowledge Management",href:a("admin.knowledge.index"),active:String(s).startsWith("/admin/knowledge")&&!String(s).startsWith("/admin/knowledge-versions"),icon:"doc"},{label:"Knowledge Versions",href:a("admin.knowledge-versions.index"),active:String(s).startsWith("/admin/knowledge-versions"),icon:"versions"},{label:"Change Logs",href:a("admin.change-logs.index"),active:String(s).startsWith("/admin/change-logs"),icon:"changelog"},{label:"User Management",href:a("admin.users.index"),active:String(s).startsWith("/admin/users"),icon:"users"},{label:"AI Assistant",href:a("admin.ai.index"),active:String(s).startsWith("/admin/ai"),icon:"ai"}]:H?[{label:"Dashboard",href:a("dashboard.skpd"),active:s===a("dashboard.skpd")||String(s).startsWith("/dashboard/skpd"),icon:"dashboard"},{label:"Knowledge SKPD",href:a("skpd.knowledge.index"),active:String(s).startsWith("/skpd/knowledge"),icon:"doc"},{label:"AI Assistant",href:a("ai.index"),active:String(s).startsWith("/ai"),icon:"ai"}]:[]}),S={dashboard:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z",doc:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",versions:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z",changelog:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01",users:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z",ai:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"};function D(s){if(!s||!s.roles)return"User";const e=s.roles.map(n=>typeof n=="string"?n:typeof n=="object"&&n.name?n.name:"User");return e.length>0?e.join(", "):"User"}function f(s){return typeof s=="function"?s():s}return j(()=>{var r;const s=((r=i.props)==null?void 0:r.flash)||{},e=f(s.success),n=f(s.error),o=f(s.message);e&&b.success(e),n&&b.error(n),o&&b.info(o)}),T(()=>{var s;return(s=i.props)==null?void 0:s.flash},s=>{if(!s)return;const e=f(s.success),n=f(s.error),o=f(s.message);e&&b.success(e),n&&b.error(n),o&&b.info(o)},{deep:!0}),(s,e)=>{var n,o;return l(),g("div",q,[t("div",G,[t("div",J,[t("button",{onClick:e[0]||(e[0]=r=>k.value=!0),class:"p-2 rounded-md text-brand-700 hover:bg-brand-50"},e[3]||(e[3]=[t("i",{class:"pi pi-bars text-lg"},null,-1)])),t("div",Q,[t("span",X,c(h.pageTitle),1)]),x(d(v),{href:d(a)("logout"),method:"post",as:"button",class:"px-3 py-1.5 rounded-md text-sm text-white bg-brand-700 hover:bg-brand-800"},{default:u(()=>e[4]||(e[4]=[O("Logout",-1)])),_:1,__:[4]},8,["href"])])]),x(d($),{visible:k.value,"onUpdate:visible":e[1]||(e[1]=r=>k.value=r),position:"left",class:"md:hidden"},{header:u(()=>e[5]||(e[5]=[t("div",{class:"text-lg font-semibold"},"SIMPAN",-1)])),default:u(()=>[t("div",Y,[(l(!0),g(B,null,C(M.value,r=>(l(),U(d(v),{key:r.href,href:r.href,class:W(["flex items-center gap-3 px-3 py-2 rounded-lg text-sm",r.active?"bg-brand-50 text-brand-700":"text-gray-700 hover:bg-brand-50 hover:text-brand-700"])},{default:u(()=>[e[6]||(e[6]=t("i",{class:"pi pi-angle-right text-sm"},null,-1)),t("span",Z,c(r.label),1)]),_:2,__:[6]},1032,["href","class"]))),128))])]),_:1},8,["visible"]),t("div",ee,[t("div",se,[t("aside",te,[e[10]||(e[10]=E('<div class="h-16 bg-gradient-to-r from-brand-700 to-brand-600 text-white flex items-center px-5"><div class="h-8 w-8 mr-3 rounded-lg bg-white/10 flex items-center justify-center"><svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3l7 4v6c0 5-7 8-7 8s-7-3-7-8V7l7-4z"></path></svg></div><div class="text-lg font-semibold tracking-wide">SIMPAN</div></div>',1)),t("nav",re,[t("div",ne,[(l(!0),g(B,null,C(M.value,r=>(l(),U(d(v),{key:r.href,href:r.href,class:W(["flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors",r.active?"bg-brand-50 text-brand-700 border border-brand-100":"text-gray-700 hover:bg-brand-50 hover:text-brand-700"])},{default:u(()=>[(l(),g("svg",ae,[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:S[r.icon]||S.dashboard},null,8,oe)])),t("span",ie,c(r.label),1)]),_:2},1032,["href","class"]))),128))])]),t("div",{class:"px-4 py-3 border-t border-brand-100 bg-white/70 relative",ref_key:"userMenuWrapper",ref:_},[t("button",{onClick:e[2]||(e[2]=r=>p.value=!p.value),ref_key:"userMenuButton",ref:L,class:"w-full flex items-center gap-2 rounded-md hover:bg-brand-50 px-2 py-1.5"},[t("div",de,c((((n=h.user)==null?void 0:n.name)||"U").slice(0,1)),1),t("div",le,[t("div",ce,c(((o=h.user)==null?void 0:o.name)||"User"),1),t("div",ue,c(D(h.user)),1)]),e[7]||(e[7]=t("svg",{class:"w-4 h-4 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{d:"M5.23 7.21a.75.75 0 011.06.02L10 11.14l3.71-3.91a.75.75 0 111.08 1.04l-4.24 4.46a.75.75 0 01-1.08 0L5.21 8.27a.75.75 0 01.02-1.06z"})],-1))],512),p.value?(l(),g("div",{key:0,ref_key:"userMenu",ref:N,class:"absolute right-3 bottom-14 z-50 w-48 rounded-lg bg-white shadow-lg border border-brand-100 overflow-hidden"},[x(d(v),{href:"/settings",class:"flex items-center gap-2 px-3 py-2 text-sm text-gray-700 hover:bg-brand-50"},{default:u(()=>e[8]||(e[8]=[t("svg",{class:"w-4 h-4 text-gray-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 8a4 4 0 100 8 4 4 0 000-8z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.93 4.93l2.12 2.12M16.95 4.93l-2.12 2.12M4.93 19.07l2.12-2.12M16.95 19.07l-2.12-2.12M3 12h3M18 12h3M12 3v3M12 18v3"})],-1),t("span",null,"Setting",-1)])),_:1,__:[8]}),x(d(v),{href:d(a)("logout"),method:"post",as:"button",class:"w-full flex items-center gap-2 px-3 py-2 text-sm text-rose-700 hover:bg-rose-50"},{default:u(()=>e[9]||(e[9]=[t("svg",{class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12H3m12 0l-4-4m4 4l-4 4m6-9V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2h8a2 2 0 002-2v-2"})],-1),t("span",null,"Logout",-1)])),_:1,__:[9]},8,["href"])],512)):F("",!0)],512)])]),t("div",he,[t("div",fe,[t("span",be,c(h.pageTitle),1)]),t("main",me,[t("div",ge,[R(s.$slots,"default")])])])])])}}};export{ke as _};
