import{r as b,n as de,b as l,o as n,a as e,e as d,g as G,v as J,F as C,m as j,s as T,t as u,h as Q,y as P,H as ue,p as N,A as ce,L as ge,c as F,w as U,i as O,k as f,u as q,j as R,f as me,x as ve,N as pe}from"./app-BMbBdLPb.js";import{_ as se}from"./VueSelect.vue_vue_type_script_setup_true_lang-ClLfV8ht.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as he}from"./PublicLayout-CM64ZlnH.js";import{r as xe}from"./route-BVPoXIPw.js";const fe={class:"relative w-full max-w-2xl mx-auto"},be={class:"relative"},ye={class:"absolute inset-y-0 right-0 pr-4 flex items-center"},ke={key:0,class:"absolute top-full left-0 right-0 mt-2 bg-white rounded-2xl shadow-2xl border border-gray-200 z-50 max-h-96 overflow-hidden"},we={key:0,class:"p-4 text-center"},_e={key:1,class:"border-b border-gray-100"},Ce={class:"max-h-48 overflow-y-auto"},Me=["onClick"],$e={class:"flex items-center space-x-3"},Se=["innerHTML"],je={class:"text-sm text-gray-500 truncate"},Ae={key:2},Te={class:"max-h-48 overflow-y-auto"},Ie=["onClick"],Ve={class:"flex items-start space-x-3"},Le={class:"flex-1 min-w-0"},Pe={class:"font-medium text-gray-900 truncate"},Be={class:"text-sm text-gray-500 line-clamp-2"},De={class:"flex items-center mt-1 space-x-2 text-xs text-gray-400"},Ke={class:"bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full"},ze={key:3,class:"p-6 text-center"},He={class:"text-gray-500"},Ee={__name:"GoogleLikeSearch",props:{initialValue:{type:String,default:""},placeholder:{type:String,default:"Cari pengetahuan, topik, atau kata kunci..."}},emits:["search","select"],setup(g,{emit:k}){const i=g,I=k,c=b(i.initialValue),y=b(!1),v=b([]),_=b([]),M=b(!1),p=b(-1),m=b(null);let w=null;const $=()=>{if(clearTimeout(w),p.value=-1,c.value.length<2){v.value=[],S();return}w=setTimeout(()=>{V()},300)},V=async()=>{if(!(c.value.length<2)){M.value=!0;try{const o=await Q.get("/api/knowledge/search-suggestions",{params:{q:c.value}});v.value=o.data.suggestions||[],_.value=o.data.recommendations||[]}catch(o){console.error("Error fetching suggestions:",o),v.value=[],_.value=[]}finally{M.value=!1}}},S=async()=>{try{const o=await Q.get("/api/knowledge/recommendations");_.value=o.data.recommendations||[]}catch(o){console.error("Error loading recommendations:",o),_.value=[]}},B=o=>{c.value=o.title,y.value=!1,I("search",o.title),H(o.title)},D=o=>{y.value=!1,I("select",o),P.visit(`/knowledge/public/${o.id}`)},K=()=>{var o;c.value="",v.value=[],p.value=-1,S(),(o=m.value)==null||o.focus()},z=o=>{var h;const r=v.value.length+_.value.length;switch(o.key){case"ArrowDown":o.preventDefault(),p.value=Math.min(p.value+1,r-1);break;case"ArrowUp":o.preventDefault(),p.value=Math.max(p.value-1,-1);break;case"Enter":if(o.preventDefault(),p.value>=0)if(p.value<v.value.length)B(v.value[p.value]);else{const A=p.value-v.value.length;D(_.value[A])}else c.value.trim()&&H(c.value);break;case"Escape":y.value=!1,(h=m.value)==null||h.blur();break}},H=o=>{y.value=!1,I("search",o),P.get("/knowledge/public",{search:o},{preserveState:!0,preserveScroll:!0})},E=o=>{if(!c.value||c.value.length<2)return o;const r=new RegExp(`(${c.value})`,"gi");return o.replace(r,'<mark class="bg-yellow-200">$1</mark>')};return S(),de(()=>i.initialValue,o=>{c.value=o}),(o,r)=>(n(),l("div",fe,[e("div",be,[r[4]||(r[4]=e("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),G(e("input",{ref_key:"searchInput",ref:m,"onUpdate:modelValue":r[0]||(r[0]=h=>c.value=h),onInput:$,onFocus:r[1]||(r[1]=h=>y.value=!0),onKeydown:z,type:"text",placeholder:"Cari pengetahuan, topik, atau kata kunci...",class:"w-full h-[42px] pl-12 pr-12 py-2.5 text-base border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500 transition-all duration-200 hover:border-gray-400"},null,544),[[J,c.value]]),e("div",ye,[c.value?(n(),l("button",{key:0,onClick:K,class:"text-gray-400 hover:text-gray-600 transition-colors"},r[3]||(r[3]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):d("",!0)])]),y.value&&(v.value.length>0||_.value.length>0||M.value)?(n(),l("div",ke,[M.value?(n(),l("div",we,r[5]||(r[5]=[e("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mx-auto"},null,-1),e("p",{class:"text-sm text-gray-500 mt-2"},"Mencari...",-1)]))):d("",!0),v.value.length>0&&!M.value?(n(),l("div",_e,[r[7]||(r[7]=e("div",{class:"px-4 py-2 bg-gray-50 text-xs font-semibold text-gray-600 uppercase tracking-wide"}," Saran Pencarian ",-1)),e("div",Ce,[(n(!0),l(C,null,j(v.value,(h,A)=>(n(),l("button",{key:`suggestion-${A}`,onClick:L=>B(h),class:T(["w-full text-left px-4 py-3 hover:bg-blue-50 transition-colors border-b border-gray-50 last:border-b-0",p.value===A?"bg-blue-50":""])},[e("div",$e,[r[6]||(r[6]=e("svg",{class:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),e("div",null,[e("div",{class:"font-medium text-gray-900",innerHTML:E(h.title)},null,8,Se),e("div",je,u(h.description),1)])])],10,Me))),128))])])):d("",!0),_.value.length>0&&!M.value?(n(),l("div",Ae,[r[9]||(r[9]=e("div",{class:"px-4 py-2 bg-gray-50 text-xs font-semibold text-gray-600 uppercase tracking-wide"}," Rekomendasi untuk Anda ",-1)),e("div",Te,[(n(!0),l(C,null,j(_.value,(h,A)=>(n(),l("button",{key:`rec-${h.id}`,onClick:L=>D(h),class:T(["w-full text-left px-4 py-3 hover:bg-green-50 transition-colors border-b border-gray-50 last:border-b-0",p.value===v.value.length+A?"bg-green-50":""])},[e("div",Ve,[r[8]||(r[8]=e("div",{class:"flex-shrink-0 mt-1"},[e("div",{class:"w-2 h-2 bg-green-500 rounded-full"})],-1)),e("div",Le,[e("div",Pe,u(h.title),1),e("div",Be,u(h.description),1),e("div",De,[e("span",Ke,u(h.category),1),e("span",null,u(h.author),1)])])])],10,Ie))),128))])])):d("",!0),!M.value&&v.value.length===0&&_.value.length===0&&c.value.length>2?(n(),l("div",ze,[r[10]||(r[10]=e("svg",{class:"h-12 w-12 text-gray-300 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.29-1.009-5.824-2.562M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)),e("p",He,'Tidak ada hasil ditemukan untuk "'+u(c.value)+'"',1),r[11]||(r[11]=e("p",{class:"text-sm text-gray-400 mt-1"},"Coba kata kunci yang berbeda atau lebih spesifik",-1))])):d("",!0)])):d("",!0),y.value?(n(),l("div",{key:1,onClick:r[2]||(r[2]=h=>y.value=!1),class:"fixed inset-0 z-40"})):d("",!0)]))}},Fe=ne(Ee,[["__scopeId","data-v-97d84ddc"]]),Oe={class:"mb-8"},Ne={class:"text-3xl font-bold text-gray-900 mb-2"},Ue={class:"text-gray-600"},qe={__name:"PublicPageHeader",props:{title:{type:String,required:!0},description:{type:String,default:""}},setup(g){return(k,i)=>(n(),l("div",Oe,[e("h1",Ne,u(g.title),1),e("p",Ue,u(g.description),1)]))}},Re={class:"bg-white p-6 rounded-xl shadow-md ring-1 ring-gray-100 mb-8"},Ge={class:"flex items-center justify-between mb-6"},Je={class:"flex space-x-3"},Qe=["disabled"],Xe={class:"space-y-4"},We={class:"grid grid-cols-1 lg:grid-cols-6 gap-4 items-start"},Ye={class:"lg:col-span-2"},Ze={class:"lg:col-span-2 relative"},et={class:"relative"},tt={key:0,class:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto"},st=["onClick"],nt={key:0,class:"text-blue-500"},at={key:0,class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},lt={key:0},ot={class:"flex flex-wrap gap-2 max-h-32 overflow-y-auto"},rt=["onClick"],it={key:0,class:"ml-1"},dt={key:1},ut={class:"text-xs text-gray-500 mb-2"},ct={class:"flex flex-wrap gap-2"},gt=["onClick"],mt={key:0,class:"mt-4 pt-4 border-t border-gray-100"},vt={class:"flex items-center space-x-2"},pt={class:"flex flex-wrap gap-2"},ht={key:0,class:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},xt={key:1,class:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"},ft={key:2,class:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},bt={key:3,class:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800"},yt={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},kt=["onClick"],wt={class:"p-6"},_t={class:"text-lg font-semibold text-gray-900 mb-2 line-clamp-2"},Ct={class:"text-gray-600 text-sm mb-4 line-clamp-3"},Mt={class:"flex items-center justify-between text-xs text-gray-500"},$t={key:0,class:"mt-3 flex flex-wrap gap-1"},St={key:0,class:"text-xs text-gray-500"},jt={key:1,class:"text-center py-12"},At={key:2,class:"mt-8"},Tt={class:"flex items-center justify-between"},It={class:"flex-1 flex justify-between sm:hidden"},Vt={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Lt={class:"text-sm text-gray-700"},Pt={class:"font-medium"},Bt={class:"font-medium"},Dt={class:"font-medium"},Kt={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},zt=["innerHTML"],Ht={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Et={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Ft={class:"h-96 overflow-y-auto border border-gray-200 rounded-lg p-4 mb-4 bg-gray-50"},Ot={key:0,class:"text-center text-gray-500 mt-20"},Nt={class:"text-sm whitespace-pre-wrap"},Ut={key:1,class:"flex justify-start mb-4"},qt={class:"flex space-x-2"},Rt=["disabled"],Gt=["disabled"],Jt={__name:"Public",props:{knowledge:Object,filters:Object,categories:Array,skpds:Array},setup(g){var Y,Z,ee,te;const k=g,i=ue({search:((Y=k.filters)==null?void 0:Y.search)||"",category_id:((Z=k.filters)==null?void 0:Z.category_id)||"",skpd_id:((ee=k.filters)==null?void 0:ee.skpd_id)||""}),I=b(!1),c=b([]),y=b(""),v=b(!1);b(!1);const _=N(()=>{const a=[{value:"",label:"Semua Kategori"}];return k.categories&&a.push(...k.categories.map(t=>({value:t.id,label:t.name}))),a}),M=N(()=>{const a=[{value:"",label:"Semua SKPD"}];return k.skpds&&a.push(...k.skpds.map(t=>({value:t.id,label:t.nama_skpd}))),a}),p=b(""),m=b(Array.isArray((te=k.filters)==null?void 0:te.tags)?k.filters.tags:[]),w=b([]),$=b([]),V=b(!1),S=()=>{const a={...i,tags:m.value.length>0?m.value:void 0};Object.keys(a).forEach(t=>{(a[t]===""||a[t]===null||a[t]===void 0)&&delete a[t]}),P.get("/knowledge/public",a,{preserveState:!0,preserveScroll:!0})},B=()=>{i.search="",i.category_id="",i.skpd_id="",m.value=[],$.value=[],p.value="",w.value=[],S()},D=a=>{const t=w.value.find(x=>x.id===a);if(t)return t.name;const s=$.value.find(x=>x.id===a);return(s==null?void 0:s.name)||`Tag ${a}`},K=a=>{m.value=m.value.filter(t=>t!==a),$.value=$.value.filter(t=>t.id!==a),S()},z=a=>{m.value.includes(a.id)?K(a.id):(m.value.push(a.id),$.value.find(t=>t.id===a.id)||$.value.push(a),S()),V.value=!1,p.value=""},H=async()=>{if(p.value.length<2){w.value=[];return}try{const a=await Q.get("/api/knowledge/tags",{params:{q:p.value}});w.value=a.data.data||[]}catch(a){console.error("Error searching tags:",a),w.value=[]}};let E=null;const o=()=>{clearTimeout(E),E=setTimeout(()=>{H()},300)},r=a=>{const t=a.target.closest(".relative");(!t||!t.querySelector('input[placeholder="Cari tag..."]'))&&(V.value=!1)};ce(()=>{document.addEventListener("click",r)}),ge(()=>{document.removeEventListener("click",r)});const h=a=>{P.visit(xe("knowledge.public.show",a))},A=a=>new Date(a).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}),L=N(()=>i.search||i.category_id||i.skpd_id||m.value.length>0),ae=a=>{var s;const t=(s=k.categories)==null?void 0:s.find(x=>x.id==a);return(t==null?void 0:t.name)||"Unknown"},le=a=>{var s;const t=(s=k.skpds)==null?void 0:s.find(x=>x.id==a);return(t==null?void 0:t.nama_skpd)||"Unknown"},oe=a=>{i.search=a,S()},re=a=>{P.visit(`/knowledge/public/${a.id}`)},ie=()=>{I.value=!0,c.value.length===0&&c.value.push({role:"assistant",content:`Halo! Saya adalah AI Assistant yang akan membantu Anda menjelajahi dan memahami seluruh pengetahuan yang tersedia di sistem manajemen pengetahuan ini.

Saya dapat membantu Anda dengan:
- Mencari informasi tentang dokumen pengetahuan yang tersedia
- Menjelaskan konsep atau topik dari berbagai dokumen
- Memberikan ringkasan dari pengetahuan yang ada
- Menjawab pertanyaan umum tentang sistem

Ada yang ingin Anda ketahui tentang pengetahuan di sistem ini?`})},X=()=>{I.value=!1},W=async()=>{var t;if(!y.value.trim()||v.value)return;const a=y.value.trim();y.value="",c.value.push({role:"user",content:a}),v.value=!0;try{const s=await fetch("/api/ai/gemini/chat",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content")},body:JSON.stringify({message:a,context:{knowledge_title:"Sistem Manajemen Pengetahuan",knowledge_content:"Seluruh pengetahuan yang tersedia di aplikasi",knowledge_description:"AI Assistant untuk membantu menjawab pertanyaan tentang seluruh pengetahuan yang ada di sistem manajemen pengetahuan ini, termasuk dokumen, konsep, dan informasi yang tersimpan"}})});if(!s.ok)throw new Error("Failed to get AI response");const x=await s.json();c.value.push({role:"assistant",content:x.response})}catch(s){console.error("AI Error:",s),c.value.push({role:"assistant",content:"Maaf, terjadi kesalahan saat menghubungi AI Assistant. Silakan coba lagi."})}finally{v.value=!1,await pe();const s=document.querySelector(".h-96.overflow-y-auto");s&&(s.scrollTop=s.scrollHeight)}};return(a,t)=>(n(),F(he,null,{default:U(()=>[O(qe,{title:"Temukan Pengetahuan",description:"Jelajahi koleksi pengetahuan yang telah terverifikasi dari Pemerintah Kabupaten Hulu Sungai Selatan"}),e("div",Re,[e("div",Ge,[t[13]||(t[13]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-900"},"Filter Data"),e("p",{class:"text-sm text-gray-500 mt-1"},"Saring data berdasarkan kriteria yang diinginkan")],-1)),e("div",Je,[e("button",{onClick:ie,class:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105"},t[10]||(t[10]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})],-1),f(" AI Assistant ",-1)])),e("button",{onClick:S,class:"inline-flex items-center px-4 py-2 text-sm font-semibold text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 shadow-sm"},t[11]||(t[11]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z"})],-1),f(" Filter Data ",-1)])),e("button",{onClick:B,disabled:!L.value,class:T(["inline-flex items-center px-4 py-2 text-sm font-medium rounded-lg border transition-all duration-200",L.value?"text-gray-600 bg-gray-50 border-gray-300 hover:bg-gray-100 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 shadow-sm":"text-gray-400 bg-gray-100 border-gray-200 cursor-not-allowed"])},t[12]||(t[12]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),f(" Hapus Filter ",-1)]),10,Qe)])]),e("div",Xe,[e("div",We,[e("div",Ye,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pencarian Cerdas",-1)),O(Fe,{"initial-value":i.search,onSearch:oe,onSelect:re},null,8,["initial-value"])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Kategori",-1)),O(se,{modelValue:i.category_id,"onUpdate:modelValue":t[0]||(t[0]=s=>i.category_id=s),options:_.value,placeholder:"Pilih Kategori..."},null,8,["modelValue","options"])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"SKPD",-1)),O(se,{modelValue:i.skpd_id,"onUpdate:modelValue":t[1]||(t[1]=s=>i.skpd_id=s),options:M.value,placeholder:"Pilih SKPD..."},null,8,["modelValue","options"])]),e("div",Ze,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tags",-1)),e("div",et,[G(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>p.value=s),onInput:o,onFocus:t[3]||(t[3]=s=>V.value=!0),type:"text",placeholder:"Cari tag...",class:"w-full h-[42px] px-3 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 hover:border-gray-400 transition-colors duration-200"},null,544),[[J,p.value]]),V.value&&w.value.length>0?(n(),l("div",tt,[(n(!0),l(C,null,j(w.value,s=>(n(),l("div",{key:s.id,onClick:x=>z(s),class:"px-3 py-2 hover:bg-gray-100 cursor-pointer flex items-center justify-between"},[e("span",null,u(s.name),1),m.value.includes(s.id)?(n(),l("span",nt,"✓")):d("",!0)],8,st))),128))])):d("",!0)])])]),w.value.length>0||m.value.length>0?(n(),l("div",at,[w.value.length>0?(n(),l("div",lt,[t[18]||(t[18]=e("div",{class:"text-xs text-gray-500 mb-2"},"Pilih tag:",-1)),e("div",ot,[(n(!0),l(C,null,j(w.value,s=>(n(),l("button",{key:s.id,type:"button",onClick:x=>z(s),class:T([m.value.includes(s.id)?"bg-blue-600 text-white border-blue-600":"bg-gray-100 text-gray-700 hover:bg-gray-200 border-gray-200","px-2.5 py-1.5 text-xs rounded-md border transition-colors duration-200"])},[f(u(s.name)+" ",1),m.value.includes(s.id)?(n(),l("span",it,"✓")):d("",!0)],10,rt))),128))])])):d("",!0),m.value.length?(n(),l("div",dt,[e("div",ut,"Tag terpilih ("+u(m.value.length)+"):",1),e("div",ct,[(n(!0),l(C,null,j(m.value,s=>(n(),l("span",{key:`sel-${s}`,class:"inline-flex items-center px-2.5 py-1 rounded-full text-xs bg-indigo-100 text-indigo-800"},[f(u(D(s))+" ",1),e("button",{class:"ml-1.5 text-indigo-600 hover:text-indigo-800 font-medium",onClick:x=>K(s)},"×",8,gt)]))),128))])])):d("",!0)])):d("",!0)]),L.value?(n(),l("div",mt,[e("div",vt,[t[19]||(t[19]=e("span",{class:"text-sm text-gray-500"},"Filter aktif:",-1)),e("div",pt,[i.search?(n(),l("span",ht,[f(" Search: "+u(i.search)+" ",1),e("button",{onClick:t[4]||(t[4]=s=>i.search=""),class:"ml-1.5 text-blue-700 hover:text-blue-900"}," × ")])):d("",!0),i.category_id?(n(),l("span",xt,[f(" Kategori: "+u(ae(i.category_id))+" ",1),e("button",{onClick:t[5]||(t[5]=s=>i.category_id=""),class:"ml-1.5 text-green-600 hover:text-green-800"}," × ")])):d("",!0),i.skpd_id?(n(),l("span",ft,[f(" SKPD: "+u(le(i.skpd_id))+" ",1),e("button",{onClick:t[6]||(t[6]=s=>i.skpd_id=""),class:"ml-1.5 text-purple-600 hover:text-purple-800"}," × ")])):d("",!0),m.value.length>0?(n(),l("span",bt,[f(" Tags: "+u(m.value.length)+" dipilih ",1),e("button",{onClick:t[7]||(t[7]=s=>{m.value=[],$.value=[]}),class:"ml-1.5 text-indigo-600 hover:text-indigo-800"}," × ")])):d("",!0)])])])):d("",!0)]),g.knowledge&&g.knowledge.data&&g.knowledge.data.length>0?(n(),l("div",yt,[(n(!0),l(C,null,j(g.knowledge.data,s=>(n(),l("div",{key:s.id,class:"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow cursor-pointer",onClick:x=>h(s.id)},[e("div",wt,[t[22]||(t[22]=e("div",{class:"flex items-center justify-between mb-3"},null,-1)),e("h3",_t,u(s.title),1),e("p",Ct,u(s.description||"Tidak ada deskripsi"),1),e("div",Mt,[t[20]||(t[20]=e("div",{class:"flex items-center space-x-4"},null,-1)),e("div",null,u(A(s.created_at)),1)]),s.tags_relation&&s.tags_relation.length>0?(n(),l("div",$t,[(n(!0),l(C,null,j(s.tags_relation.slice(0,3),x=>(n(),l("span",{key:x.id,class:"inline-flex items-center px-2 py-1 rounded text-xs bg-blue-100 text-blue-800"},[t[21]||(t[21]=e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1)),f(" "+u(x.name),1)]))),128)),s.tags_relation.length>3?(n(),l("span",St," +"+u(s.tags_relation.length-3)+" lainnya ",1)):d("",!0)])):d("",!0)])],8,kt))),128))])):(n(),l("div",jt,t[23]||(t[23]=[e("div",{class:"w-24 h-24 mx-auto mb-4 text-gray-300"},[e("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1),e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Tidak ada pengetahuan ditemukan",-1),e("p",{class:"text-gray-600"},"Coba ubah filter pencarian atau kata kunci Anda.",-1)]))),g.knowledge&&g.knowledge.data&&g.knowledge.data.length>0&&g.knowledge.links&&g.knowledge.links.length>0?(n(),l("div",At,[e("nav",Tt,[e("div",It,[g.knowledge.prev_page_url?(n(),F(q(R),{key:0,href:g.knowledge.prev_page_url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:U(()=>t[24]||(t[24]=[f(" Sebelumnya ",-1)])),_:1,__:[24]},8,["href"])):d("",!0),g.knowledge.next_page_url?(n(),F(q(R),{key:1,href:g.knowledge.next_page_url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:U(()=>t[25]||(t[25]=[f(" Selanjutnya ",-1)])),_:1,__:[25]},8,["href"])):d("",!0)]),e("div",Vt,[e("div",null,[e("p",Lt,[t[26]||(t[26]=f(" Menampilkan ",-1)),e("span",Pt,u(g.knowledge.from),1),t[27]||(t[27]=f(" sampai ",-1)),e("span",Bt,u(g.knowledge.to),1),t[28]||(t[28]=f(" dari ",-1)),e("span",Dt,u(g.knowledge.total),1),t[29]||(t[29]=f(" hasil ",-1))])]),e("div",null,[e("nav",Kt,[(n(!0),l(C,null,j(g.knowledge.links,s=>(n(),l(C,{key:s.label},[s.url?(n(),F(q(R),{key:0,href:s.url,class:T(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",s.active?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"]),"preserve-scroll":!0,innerHTML:s.label},null,8,["href","class","innerHTML"])):(n(),l("span",{key:1,class:T(["relative inline-flex items-center px-4 py-2 border text-sm font-medium","bg-gray-100 border-gray-300 text-gray-400 cursor-not-allowed"]),innerHTML:s.label},null,8,zt))],64))),128))])])])])])):d("",!0),I.value?(n(),l("div",{key:3,class:"fixed inset-0 z-50 overflow-y-auto",onClick:X},[e("div",Ht,[t[35]||(t[35]=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)),e("div",{class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",onClick:t[9]||(t[9]=me(()=>{},["stop"]))},[e("div",Et,[e("div",{class:"flex items-center justify-between mb-4"},[t[31]||(t[31]=e("h3",{class:"text-lg font-medium text-gray-900 flex items-center"},[e("svg",{class:"w-6 h-6 mr-2 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})]),f(" AI Assistant ")],-1)),e("button",{onClick:X,class:"text-gray-400 hover:text-gray-600"},t[30]||(t[30]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",Ft,[c.value.length===0?(n(),l("div",Ot,t[32]||(t[32]=[e("svg",{class:"w-12 h-12 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1),e("p",null,"Mulai percakapan dengan AI Assistant tentang sistem manajemen pengetahuan",-1)]))):d("",!0),(n(!0),l(C,null,j(c.value,(s,x)=>(n(),l("div",{key:x,class:"mb-4"},[e("div",{class:T(s.role==="user"?"flex justify-end":"flex justify-start")},[e("div",{class:T(["max-w-xs lg:max-w-md px-4 py-2 rounded-lg",s.role==="user"?"bg-purple-500 text-white":"bg-gray-100 text-gray-800"])},[e("p",Nt,u(s.content),1)],2)],2)]))),128)),v.value?(n(),l("div",Ut,t[33]||(t[33]=[e("div",{class:"bg-white border border-gray-200 px-4 py-2 rounded-lg"},[e("div",{class:"flex items-center space-x-2"},[e("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-600"}),e("span",{class:"text-sm text-gray-500"},"AI sedang mengetik...")])],-1)]))):d("",!0)]),e("div",qt,[G(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>y.value=s),onKeyup:ve(W,["enter"]),type:"text",placeholder:"Tanyakan tentang sistem manajemen pengetahuan...",class:"flex-1 border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:v.value},null,40,Rt),[[J,y.value]]),e("button",{onClick:W,disabled:v.value||!y.value.trim(),class:"px-6 py-2 bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200"},t[34]||(t[34]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1)]),8,Gt)])])])])])):d("",!0)]),_:1}))}},es=ne(Jt,[["__scopeId","data-v-7e607aed"]]);export{es as default};
