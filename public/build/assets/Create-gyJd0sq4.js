import{_ as K}from"./AdminLayout-jsBB2F9S.js";import{d as N,p as D,r as w,c as T,o as m,w as l,a as e,b as f,e as A,i as t,t as _,u as o,j as k,k as d,q as g,F as R,m as L,y as C,l as h}from"./app-CtXwnPDK.js";import{c as O,f as G,d as b,a as I,g as J,F as Q,e as u,E as c}from"./index.esm-G-aviGa8.js";import{_ as W}from"./VueSelect.vue_vue_type_script_setup_true_lang-BhMyTmin.js";import{r as V}from"./route-BVPoXIPw.js";import"./sidebar.esm-BVgX1l_v.js";const X={class:"min-h-screen bg-gray-50"},Y={class:"w-full mx-auto py-6 px-6"},Z={class:"px-0"},ee={key:0,class:"mb-4"},se={class:"rounded-md bg-green-50 p-4 border border-green-200"},ae={class:"text-sm font-medium text-green-800"},re={class:"mb-6 flex items-center justify-between"},te={class:"grid grid-cols-1 gap-6"},oe={class:"space-y-6"},ne={class:"bg-white shadow rounded-lg p-6"},le={class:"space-y-6"},de={class:"relative"},ie={class:"relative"},me={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ue={class:"relative"},ce={class:"relative"},pe={class:"flex flex-wrap gap-2"},fe=["value","checked","onChange"],be={class:"sticky bottom-0 inset-x-0 bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/80 border-t border-gray-200 px-6 py-4 flex justify-end gap-3 shadow-lg"},ge=["disabled"],ve={key:0},xe={key:1},Ve=N({__name:"Create",props:{user:{},roles:{},skpds:{}},setup(B){const M=B,j=D(()=>(M.skpds||[]).map(n=>({id:n.id,nama_skpd:n.nama_skpd}))),$=O({name:b().required("Nama wajib diisi").max(255),email:b().required("Email wajib diisi").email("Format email tidak valid").max(255),password:b().required("Password wajib diisi").min(8,"Minimal 8 karakter"),password_confirmation:b().oneOf([J("password")],"Konfirmasi password tidak sama").required("Konfirmasi password wajib diisi"),skpd_id:I().required("SKPD wajib dipilih"),roles:G().of(b()).ensure().min(1,"Minimal pilih 1 role").default([])}),z=w(null),p=w(!1),F=(n,s)=>p.value||!s,P=async n=>{try{p.value=!0,C.post(V("users.store"),{name:n.name,email:n.email,password:n.password,password_confirmation:n.password_confirmation,skpd_id:n.skpd_id,roles:n.roles||[]},{onSuccess:()=>{h.success("User berhasil dibuat"),C.visit(V("users.index"))},onError:s=>{h.error("Gagal menyimpan user")},onFinish:()=>{p.value=!1}})}catch{p.value=!1,h.error("Terjadi kesalahan")}};return(n,s)=>(m(),T(K,{"page-title":"Tambah User",user:n.user},{default:l(()=>{var y;return[e("div",X,[e("div",Y,[e("div",Z,[(y=n.$page.props.flash)!=null&&y.success?(m(),f("div",ee,[e("div",se,[e("p",ae,_(n.$page.props.flash.success),1)])])):A("",!0),e("div",re,[t(o(k),{href:"/users",class:"text-brand-700 hover:text-brand-800 mr-4"},{default:l(()=>s[0]||(s[0]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),_:1,__:[0]}),s[1]||(s[1]=e("div",{class:"flex-1"},[e("h1",{class:"text-3xl font-bold text-gray-900"},"Tambah User Baru"),e("p",{class:"text-gray-600 mt-2"},"Buat user baru untuk sistem manajemen pengetahuan")],-1)),s[2]||(s[2]=e("div",{class:"hidden md:flex items-center gap-3"},[e("span",{class:"inline-flex items-center rounded-full bg-brand-50 px-3 py-1 text-sm font-medium text-brand-700 border border-brand-100"},"Form")],-1))]),t(o(Q),{ref_key:"formRef",ref:z,"validation-schema":o($),onSubmit:P,class:"space-y-6"},{default:l(({meta:S,values:U})=>[e("div",te,[e("div",oe,[e("div",ne,[e("div",le,[e("div",null,[s[4]||(s[4]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 mb-2"},[d("Nama "),e("span",{class:"text-red-500"},"*")],-1)),t(o(u),{name:"name"},{default:l(({field:a,meta:r})=>[e("div",de,[s[3]||(s[3]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[e("svg",{class:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z","clip-rule":"evenodd"})])],-1)),e("input",g(a,{id:"name",type:"text",class:["w-full pl-10 pr-24 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-500 border transition-colors",r.touched&&!r.valid?"border-red-500":"border-gray-300 hover:border-gray-400"],placeholder:"Masukkan nama lengkap",maxlength:"255"}),null,16)])]),_:2},1024),t(o(c),{name:"name",class:"mt-1 text-sm text-red-600"})]),e("div",null,[s[6]||(s[6]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"},[d("Email "),e("span",{class:"text-red-500"},"*")],-1)),t(o(u),{name:"email"},{default:l(({field:a,meta:r})=>[e("div",ie,[s[5]||(s[5]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[e("svg",{class:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),e("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})])],-1)),e("input",g(a,{id:"email",type:"email",class:["w-full pl-10 pr-24 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-500 border transition-colors",r.touched&&!r.valid?"border-red-500":"border-gray-300 hover:border-gray-400"],placeholder:"user@example.com",maxlength:"255"}),null,16)])]),_:2},1024),t(o(c),{name:"email",class:"mt-1 text-sm text-red-600"})]),e("div",me,[e("div",null,[s[8]||(s[8]=e("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-2"},[d("Password "),e("span",{class:"text-red-500"},"*")],-1)),t(o(u),{name:"password"},{default:l(({field:a,meta:r})=>[e("div",ue,[s[7]||(s[7]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[e("svg",{class:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"})])],-1)),e("input",g(a,{id:"password",type:"password",class:["w-full pl-10 pr-24 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-500 border transition-colors",r.touched&&!r.valid?"border-red-500":"border-gray-300 hover:border-gray-400"],placeholder:"Minimal 8 karakter"}),null,16)])]),_:2},1024),t(o(c),{name:"password",class:"mt-1 text-sm text-red-600"})]),e("div",null,[s[10]||(s[10]=e("label",{for:"password_confirmation",class:"block text-sm font-medium text-gray-700 mb-2"},[d("Konfirmasi Password "),e("span",{class:"text-red-500"},"*")],-1)),t(o(u),{name:"password_confirmation"},{default:l(({field:a,meta:r})=>[e("div",ce,[s[9]||(s[9]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[e("svg",{class:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"})])],-1)),e("input",g(a,{id:"password_confirmation",type:"password",class:["w-full pl-10 pr-24 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-500 border transition-colors",r.touched&&!r.valid?"border-red-500":"border-gray-300 hover:border-gray-400"],placeholder:"Ulangi password"}),null,16)])]),_:2},1024),t(o(c),{name:"password_confirmation",class:"mt-1 text-sm text-red-600"})])]),e("div",null,[s[11]||(s[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[d("SKPD "),e("span",{class:"text-red-500"},"*")],-1)),t(o(u),{name:"skpd_id"},{default:l(({field:a})=>[t(W,{modelValue:a.value,"onUpdate:modelValue":r=>a.value=r,options:j.value,placeholder:"Pilih SKPD",onChange:r=>a.onChange(r)},null,8,["modelValue","onUpdate:modelValue","options","onChange"])]),_:1}),t(o(c),{name:"skpd_id",class:"mt-1 text-sm text-red-600"})]),e("div",null,[s[12]||(s[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[d("Roles "),e("span",{class:"text-red-500"},"*")],-1)),t(o(u),{name:"roles","initial-value":[]},{default:l(({field:a,meta:r})=>[e("div",pe,[(m(!0),f(R,null,L(n.roles,i=>(m(),f("label",{key:i.id,class:"inline-flex items-center gap-2 text-sm px-3 py-2 rounded-lg border border-brand-100 bg-brand-50 text-brand-800 hover:bg-brand-100 cursor-pointer transition-colors"},[e("input",{type:"checkbox",value:i.name,checked:a.value&&a.value.includes(i.name),onChange:q=>{const v=q.target,E=!!(v!=null&&v.checked),x=Array.isArray(a.value)?a.value:[];E?x.includes(i.name)||a.onChange([...x,i.name]):a.onChange(x.filter(H=>H!==i.name))},class:"rounded border-gray-300 text-brand-700 focus:ring-brand-500"},null,40,fe),d(" "+_(i.name),1)]))),128))])]),_:2},1024),t(o(c),{name:"roles",class:"mt-1 text-sm text-red-600"})])])])])]),e("div",be,[t(o(k),{href:"/users",class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500"},{default:l(()=>s[13]||(s[13]=[d("Batal",-1)])),_:1,__:[13]}),e("button",{type:"submit",disabled:F(U,S.valid),class:"px-5 py-2.5 border border-transparent rounded-md shadow-sm text-sm font-semibold text-white bg-brand-700 hover:bg-brand-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-500 disabled:opacity-50 disabled:cursor-not-allowed"},[p.value?(m(),f("span",ve,"Menyimpan...")):(m(),f("span",xe,"Simpan User"))],8,ge)])]),_:1},8,["validation-schema"])])])])]}),_:1},8,["user"]))}});export{Ve as default};
