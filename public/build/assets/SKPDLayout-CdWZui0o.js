import{S as H,r as m,A as B,U as L,n as N,x as c,m as T,b as p,o as a,a as e,i as g,t as i,w as d,j as U,u as n,l as v,F as V,k as C,c as j,q as z,P as A,e as O,T as W}from"./app-DeiHe0Bs.js";import{r as h}from"./route-BVPoXIPw.js";import{s as E}from"./sidebar.esm-B5SVcvLi.js";const F={class:"min-h-screen bg-gradient-to-b from-white to-blue-50 text-gray-900"},$={class:"md:hidden sticky top-0 z-50 bg-white/80 backdrop-blur border-b border-blue-100"},I={class:"flex items-center justify-between px-4 py-3"},q={class:"flex items-center gap-2"},G={class:"text-base font-semibold"},J={class:"space-y-1"},Q={class:"font-medium"},R={class:"flex"},X={class:"hidden md:block fixed inset-y-0 left-0 z-40 w-72 border-r border-blue-100 bg-white/85 backdrop-blur"},Y={class:"h-full flex flex-col"},Z={class:"flex-1 overflow-y-auto py-3"},ee={class:"px-3 space-y-1"},te={class:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},se=["d"],oe={class:"font-medium"},re={class:"h-9 w-9 rounded-full bg-gradient-to-br from-blue-500 to-blue-700 text-white flex items-center justify-center text-sm font-semibold"},le={class:"min-w-0 text-left flex-1"},ne={class:"text-sm font-semibold truncate"},ae={class:"text-xs text-blue-700"},ie={class:"flex-1 min-w-0 md:ml-72"},de={class:"hidden md:flex items-center justify-between sticky top-0 z-30 bg-white/80 backdrop-blur border-b border-blue-100 px-6 h-16"},ue={class:"text-xl font-semibold"},ce={class:"p-4 md:p-6"},he={class:"mx-auto max-w-[1400px]"},pe={__name:"SKPDLayout",props:{pageTitle:{type:String,default:"Dashboard SKPD"},user:{type:Object,default:null}},setup(f){const k=H(),w=m(!1),x=m(!1),_=m(null),P=m(null),D=m(null);function y(s){const t=_.value;t&&(t.contains(s.target)||(x.value=!1))}B(()=>{document.addEventListener("click",y)}),L(()=>{document.removeEventListener("click",y)});const M=N(()=>{const s=k.url||"";return[{label:"Dashboard",href:h("dashboard.skpd"),active:s===h("dashboard.skpd"),icon:"dashboard"},{label:"Knowledge SKPD",href:h("skpd.knowledge.index"),active:String(s).startsWith("/skpd/knowledge"),icon:"doc"},{label:"AI Assistant",href:h("ai.index"),active:String(s).startsWith("/ai"),icon:"ai"}]}),K={dashboard:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4",doc:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",ai:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"};function u(s){return typeof s=="function"?s():s}return B(()=>{var b;const s=((b=k.props)==null?void 0:b.flash)||{},t=u(s.success),r=u(s.error),l=u(s.message);t&&c.success(t),r&&c.error(r),l&&c.info(l)}),T(()=>{var s;return(s=k.props)==null?void 0:s.flash},s=>{if(!s)return;const t=u(s.success),r=u(s.error),l=u(s.message);t&&c.success(t),r&&c.error(r),l&&c.info(l)},{deep:!0}),(s,t)=>{var r,l,b,S;return a(),p("div",F,[e("div",$,[e("div",I,[e("button",{onClick:t[0]||(t[0]=o=>w.value=!0),class:"p-2 rounded-md text-blue-700 hover:bg-blue-50"},t[3]||(t[3]=[e("i",{class:"pi pi-bars text-lg"},null,-1)])),e("div",q,[e("span",G,i(f.pageTitle),1)]),g(n(v),{href:n(h)("logout"),method:"post",as:"button",class:"px-3 py-1.5 rounded-md text-sm text-white bg-blue-700 hover:bg-blue-800"},{default:d(()=>t[4]||(t[4]=[U("Logout",-1)])),_:1,__:[4]},8,["href"])])]),g(n(E),{visible:w.value,"onUpdate:visible":t[1]||(t[1]=o=>w.value=o),position:"left",class:"md:hidden"},{header:d(()=>t[5]||(t[5]=[e("div",{class:"text-lg font-semibold"},"KMS SKPD",-1)])),default:d(()=>[e("div",J,[(a(!0),p(V,null,C(M.value,o=>(a(),j(n(v),{key:o.href,href:o.href,class:z(["flex items-center gap-3 px-3 py-2 rounded-lg text-sm",o.active?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-blue-50 hover:text-blue-700"])},{default:d(()=>[t[6]||(t[6]=e("i",{class:"pi pi-angle-right text-sm"},null,-1)),e("span",Q,i(o.label),1)]),_:2,__:[6]},1032,["href","class"]))),128))])]),_:1},8,["visible"]),e("div",R,[e("div",X,[e("aside",Y,[t[10]||(t[10]=A('<div class="h-16 bg-gradient-to-r from-blue-700 to-blue-600 text-white flex items-center px-5"><div class="h-8 w-8 mr-3 rounded-lg bg-white/10 flex items-center justify-center"><svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path></svg></div><div class="text-lg font-semibold tracking-wide">KMS SKPD</div></div>',1)),e("nav",Z,[e("div",ee,[(a(!0),p(V,null,C(M.value,o=>(a(),j(n(v),{key:o.href,href:o.href,class:z(["flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors",o.active?"bg-blue-50 text-blue-700 border border-blue-100":"text-gray-700 hover:bg-blue-50 hover:text-blue-700"])},{default:d(()=>[(a(),p("svg",te,[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:K[o.icon]},null,8,se)])),e("span",oe,i(o.label),1)]),_:2},1032,["href","class"]))),128))])]),e("div",{class:"px-4 py-3 border-t border-blue-100 bg-white/70 relative",ref_key:"userMenuWrapper",ref:_},[e("button",{onClick:t[2]||(t[2]=o=>x.value=!x.value),ref_key:"userMenuButton",ref:D,class:"w-full flex items-center gap-2 rounded-md hover:bg-blue-50 px-2 py-1.5"},[e("div",re,i((((r=f.user)==null?void 0:r.name)||"U").slice(0,1)),1),e("div",le,[e("div",ne,i(((l=f.user)==null?void 0:l.name)||"User"),1),e("div",ae,i(((S=(b=f.user)==null?void 0:b.skpd)==null?void 0:S.name)||"SKPD"),1)]),t[7]||(t[7]=e("svg",{class:"w-4 h-4 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M5.23 7.21a.75.75 0 011.06.02L10 11.14l3.71-3.91a.75.75 0 111.08 1.04l-4.24 4.46a.75.75 0 01-1.08 0L5.21 8.27a.75.75 0 01.02-1.06z"})],-1))],512),x.value?(a(),p("div",{key:0,ref_key:"userMenu",ref:P,class:"absolute right-3 bottom-14 z-50 w-48 rounded-lg bg-white shadow-lg border border-blue-100 overflow-hidden"},[g(n(v),{href:"/profile",class:"flex items-center gap-2 px-3 py-2 text-sm text-gray-700 hover:bg-blue-50"},{default:d(()=>t[8]||(t[8]=[e("svg",{class:"w-4 h-4 text-gray-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),e("span",null,"Profil",-1)])),_:1,__:[8]}),g(n(v),{href:n(h)("logout"),method:"post",as:"button",class:"w-full flex items-center gap-2 px-3 py-2 text-sm text-rose-700 hover:bg-rose-50"},{default:d(()=>t[9]||(t[9]=[e("svg",{class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12H3m12 0l-4-4m4 4l-4 4m6-9V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2h8a2 2 0 002-2v-2"})],-1),e("span",null,"Logout",-1)])),_:1,__:[9]},8,["href"])],512)):O("",!0)],512)])]),e("div",ie,[e("div",de,[e("span",ue,i(f.pageTitle),1)]),e("main",ce,[e("div",he,[W(s.$slots,"default")])])])])])}}};export{pe as _};
