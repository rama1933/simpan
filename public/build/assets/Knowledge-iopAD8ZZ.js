import{r as N,c as _,o as i,w as u,a as e,b as n,e as o,i as x,u as g,l as m,j as h,t as s,q as v,F as L,k as D,f as H}from"./app-DTLBR_RG.js";import{_ as V}from"./AdminLayout-CUo47pwk.js";import"./route-BVPoXIPw.js";import"./sidebar.esm-gV_g2Euk.js";const S={class:"space-y-6"},T={class:"flex justify-between items-center"},A={class:"flex","aria-label":"Breadcrumb"},F={class:"inline-flex items-center space-x-1 md:space-x-3"},O={class:"inline-flex items-center"},I={class:"flex items-center"},R={class:"text-gray-600 mt-1"},$={class:"flex space-x-3"},E={class:"bg-white rounded-xl shadow-sm ring-1 ring-gray-100 p-6"},K={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},q={class:"mt-1"},J={class:"mt-1 text-sm text-gray-900"},U={class:"mt-1 text-sm text-gray-900"},W={class:"mt-1 text-sm text-gray-900"},G={class:"mt-1 text-sm text-gray-900"},Q={class:"mt-1 text-sm text-gray-900"},X={class:"bg-white rounded-xl shadow-sm ring-1 ring-gray-100 p-6"},Y={key:0,class:"flow-root"},Z={class:"-mb-8"},ee={key:0,class:"absolute top-4 left-4 -ml-px h-full w-0.5 bg-gray-200","aria-hidden":"true"},te={class:"relative flex space-x-3"},se={class:"h-5 w-5 text-white",fill:"currentColor",viewBox:"0 0 20 20"},ae={key:0,"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"},le={key:1,"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"},ie={key:2,"fill-rule":"evenodd",d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z","clip-rule":"evenodd"},de={key:3,"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},ne={class:"min-w-0 flex-1"},re={class:"flex justify-between items-start"},oe={class:"flex-1"},ue={class:"text-sm font-medium text-gray-900"},ge={key:0,class:"mt-1"},me={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},ce={key:1,class:"mt-3 space-y-2"},xe={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-3"},he={class:"text-sm text-red-700 break-words"},ve={key:1,class:"bg-green-50 border border-green-200 rounded-lg p-3"},be={class:"text-sm text-green-700 break-words"},fe={class:"ml-4 flex-shrink-0 text-right"},ye={class:"text-sm text-gray-500"},pe={class:"text-xs text-gray-400 mt-1"},we=["onClick"],ke={key:1,class:"text-center py-12"},_e={key:2,class:"mt-6 border-t border-gray-200 pt-6"},Le={class:"flex items-center justify-between"},De={class:"text-sm text-gray-700"},Me={class:"flex space-x-2"},Ce={class:"space-y-4"},Be={class:"grid grid-cols-2 gap-4"},je={class:"text-sm text-gray-900"},ze={class:"text-sm text-gray-900"},Pe={class:"text-sm text-gray-900"},Ne={key:0},He={class:"text-sm text-gray-900"},Ve={class:"text-sm text-gray-900"},Se={key:0,class:"grid grid-cols-1 gap-4"},Te={key:0},Ae={class:"bg-red-50 border border-red-200 rounded-lg p-3"},Fe={class:"text-sm text-red-800 whitespace-pre-wrap"},Oe={key:1},Ie={class:"bg-green-50 border border-green-200 rounded-lg p-3"},Re={class:"text-sm text-green-800 whitespace-pre-wrap"},$e={key:1},Ee={class:"bg-gray-50 border border-gray-200 rounded-lg p-3"},Ke={class:"text-sm text-gray-800 whitespace-pre-wrap"},qe={key:2},Je={class:"text-sm text-gray-900"},Ye={__name:"Knowledge",props:{user:Object,knowledge:Object,changeLogs:Object},setup(a){const r=N(null),M=d=>{r.value=d},b=()=>{r.value=null},c=d=>d?new Date(d).toLocaleString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",C=d=>({draft:"Draft",published:"Dipublikasikan",archived:"Diarsipkan"})[d]||d,B=d=>({draft:"bg-yellow-100 text-yellow-800",published:"bg-green-100 text-green-800",archived:"bg-gray-100 text-gray-800"})[d]||"bg-gray-100 text-gray-800",j=d=>({created:"Dibuat",updated:"Diperbarui",deleted:"Dihapus",published:"Dipublikasikan",archived:"Diarsipkan",field_updated:"Field Diperbarui",restored:"Dipulihkan"})[d]||d,z=d=>({created:"bg-green-500",updated:"bg-blue-500",deleted:"bg-red-500",published:"bg-purple-500",archived:"bg-gray-500",field_updated:"bg-yellow-500",restored:"bg-indigo-500"})[d]||"bg-gray-500",f=(d,t)=>d?d.length<=t?d:d.substring(0,t)+"...":"";return(d,t)=>(i(),_(V,{"page-title":`Riwayat Perubahan - ${a.knowledge.title}`,user:a.user},{default:u(()=>{var y,p,w;return[e("div",S,[e("div",T,[e("div",null,[e("nav",A,[e("ol",F,[e("li",O,[x(g(m),{href:d.route("admin.knowledge.index"),class:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-brand-600"},{default:u(()=>t[1]||(t[1]=[e("svg",{class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})],-1),h(" Pengetahuan ",-1)])),_:1,__:[1]},8,["href"])]),e("li",null,[e("div",I,[t[2]||(t[2]=e("svg",{class:"w-6 h-6 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),x(g(m),{href:d.route("admin.knowledge.show",a.knowledge.id),class:"ml-1 text-sm font-medium text-gray-700 hover:text-brand-600 md:ml-2"},{default:u(()=>[h(s(a.knowledge.title),1)]),_:1},8,["href"])])]),t[3]||(t[3]=e("li",{"aria-current":"page"},[e("div",{class:"flex items-center"},[e("svg",{class:"w-6 h-6 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})]),e("span",{class:"ml-1 text-sm font-medium text-gray-500 md:ml-2"},"Riwayat Perubahan")])],-1))])]),t[4]||(t[4]=e("h1",{class:"text-3xl font-bold text-gray-900 tracking-tight mt-2"},"Riwayat Perubahan",-1)),e("p",R,s(a.knowledge.title),1)]),e("div",$,[x(g(m),{href:d.route("admin.knowledge.show",a.knowledge.id),class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50"},{default:u(()=>t[5]||(t[5]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),h(" Lihat Pengetahuan ",-1)])),_:1,__:[5]},8,["href"]),x(g(m),{href:d.route("admin.knowledge.edit",a.knowledge.id),class:"inline-flex items-center px-4 py-2 bg-brand-600 text-sm font-medium rounded-lg text-white hover:bg-brand-700"},{default:u(()=>t[6]||(t[6]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),h(" Edit Pengetahuan ",-1)])),_:1,__:[6]},8,["href"])])]),e("div",E,[e("div",K,[e("div",null,[t[7]||(t[7]=e("h3",{class:"text-sm font-medium text-gray-500"},"Status",-1)),e("div",q,[e("span",{class:v([B(a.knowledge.status),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},s(C(a.knowledge.status)),3)])]),e("div",null,[t[8]||(t[8]=e("h3",{class:"text-sm font-medium text-gray-500"},"Kategori",-1)),e("p",J,s(((y=a.knowledge.category)==null?void 0:y.name)||"-"),1)]),e("div",null,[t[9]||(t[9]=e("h3",{class:"text-sm font-medium text-gray-500"},"Penulis",-1)),e("p",U,s(((p=a.knowledge.author)==null?void 0:p.name)||"-"),1)]),e("div",null,[t[10]||(t[10]=e("h3",{class:"text-sm font-medium text-gray-500"},"Dibuat",-1)),e("p",W,s(c(a.knowledge.created_at)),1)]),e("div",null,[t[11]||(t[11]=e("h3",{class:"text-sm font-medium text-gray-500"},"Diperbarui",-1)),e("p",G,s(c(a.knowledge.updated_at)),1)]),e("div",null,[t[12]||(t[12]=e("h3",{class:"text-sm font-medium text-gray-500"},"Total Perubahan",-1)),e("p",Q,s(a.changeLogs.total||0)+" perubahan",1)])])]),e("div",X,[t[16]||(t[16]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-6"},"Timeline Perubahan",-1)),a.changeLogs.data&&a.changeLogs.data.length>0?(i(),n("div",Y,[e("ul",Z,[(i(!0),n(L,null,D(a.changeLogs.data,(l,P)=>{var k;return i(),n("li",{key:l.id,class:"relative pb-8"},[P!==a.changeLogs.data.length-1?(i(),n("div",ee)):o("",!0),e("div",te,[e("div",null,[e("span",{class:v([z(l.action),"h-8 w-8 rounded-full flex items-center justify-center ring-8 ring-white"])},[(i(),n("svg",se,[l.action==="created"?(i(),n("path",ae)):l.action==="updated"||l.action==="field_updated"?(i(),n("path",le)):l.action==="deleted"?(i(),n("path",ie)):(i(),n("path",de))]))],2)]),e("div",ne,[e("div",re,[e("div",oe,[e("p",ue,s(l.description||l.formatted_description),1),l.field_name?(i(),n("div",ge,[e("span",me,s(l.field_name),1)])):o("",!0),l.old_value||l.new_value?(i(),n("div",ce,[l.old_value?(i(),n("div",xe,[t[13]||(t[13]=e("p",{class:"text-xs font-medium text-red-800 mb-1"},"Nilai Lama:",-1)),e("p",he,s(f(l.old_value,200)),1)])):o("",!0),l.new_value?(i(),n("div",ve,[t[14]||(t[14]=e("p",{class:"text-xs font-medium text-green-800 mb-1"},"Nilai Baru:",-1)),e("p",be,s(f(l.new_value,200)),1)])):o("",!0)])):o("",!0)]),e("div",fe,[e("p",ye,s(c(l.changed_at)),1),e("p",pe,s(((k=l.user)==null?void 0:k.name)||"System"),1),e("button",{onClick:Ue=>M(l),class:"text-xs text-brand-600 hover:text-brand-800 mt-1"}," Detail ",8,we)])])])])])}),128))])])):(i(),n("div",ke,t[15]||(t[15]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Belum ada perubahan",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Pengetahuan ini belum memiliki riwayat perubahan.",-1)]))),a.changeLogs.data&&a.changeLogs.data.length>0&&a.changeLogs.last_page>1?(i(),n("div",_e,[e("div",Le,[e("div",De," Menampilkan "+s(a.changeLogs.from)+" sampai "+s(a.changeLogs.to)+" dari "+s(a.changeLogs.total)+" perubahan ",1),e("div",Me,[(i(!0),n(L,null,D(a.changeLogs.links,l=>(i(),_(g(m),{key:l.label,href:l.url,class:v(["px-3 py-2 text-sm rounded-lg border",l.active?"bg-brand-600 text-white border-brand-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"]),disabled:!l.url,innerHTML:l.label},null,8,["href","class","disabled","innerHTML"]))),128))])])])):o("",!0)])]),r.value?(i(),n("div",{key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",onClick:b},[e("div",{class:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",onClick:t[0]||(t[0]=H(()=>{},["stop"]))},[e("div",{class:"flex justify-between items-center mb-4"},[t[18]||(t[18]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Detail Perubahan",-1)),e("button",{onClick:b,class:"text-gray-400 hover:text-gray-600"},t[17]||(t[17]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",Ce,[e("div",Be,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700"},"Waktu",-1)),e("p",je,s(c(r.value.changed_at)),1)]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700"},"User",-1)),e("p",ze,s(((w=r.value.user)==null?void 0:w.name)||"System"),1)]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700"},"Aksi",-1)),e("p",Pe,s(j(r.value.action)),1)]),r.value.field_name?(i(),n("div",Ne,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700"},"Field",-1)),e("p",He,s(r.value.field_name),1)])):o("",!0)]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Deskripsi",-1)),e("p",Ve,s(r.value.description||r.value.formatted_description),1)]),r.value.old_value||r.value.new_value?(i(),n("div",Se,[r.value.old_value?(i(),n("div",Te,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nilai Lama",-1)),e("div",Ae,[e("pre",Fe,s(r.value.old_value),1)])])):o("",!0),r.value.new_value?(i(),n("div",Oe,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nilai Baru",-1)),e("div",Ie,[e("pre",Re,s(r.value.new_value),1)])])):o("",!0)])):o("",!0),r.value.metadata?(i(),n("div",$e,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700"},"Metadata",-1)),e("div",Ee,[e("pre",Ke,s(JSON.stringify(r.value.metadata,null,2)),1)])])):o("",!0),r.value.ip_address?(i(),n("div",qe,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700"},"IP Address",-1)),e("p",Je,s(r.value.ip_address),1)])):o("",!0)])])])):o("",!0)]}),_:1},8,["page-title","user"]))}};export{Ye as default};
