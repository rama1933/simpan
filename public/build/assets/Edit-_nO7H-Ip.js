import{m as D,r as K,q as S,n as h,c as U,o as d,w as c,a as t,i as v,u as s,l as w,j as _,f as P,g as l,b as i,e as u,v as f,t as a,F as V,k as M,p as b}from"./app-BVYVdaoR.js";import{_ as q}from"./AdminLayout-B6iN6CQN.js";import{r as k}from"./route-BA7VisEj.js";import"./sidebar.esm-B-fVakm-.js";const B={class:"max-w-4xl mx-auto space-y-6"},E={class:"flex items-center justify-between"},A={class:"flex items-center space-x-3"},N={class:"bg-white rounded-xl shadow-sm border border-gray-100 p-6"},T={key:0,class:"text-red-600 text-sm mt-1"},C={key:0,class:"text-red-600 text-sm mt-1"},F={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},O=["value"],G={key:0,class:"text-red-600 text-sm mt-1"},I=["value"],J={key:0,class:"text-red-600 text-sm mt-1"},L={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},$={key:0,class:"text-red-600 text-sm mt-1"},z={key:0,class:"text-red-600 text-sm mt-1"},H={key:0,class:"text-red-600 text-sm mt-1"},Q={key:0,class:"text-red-600 text-sm mt-1"},R={class:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200"},W=["disabled"],X={key:0},Y={key:1},se={__name:"Edit",props:{knowledge:Object,categories:Array,skpds:Array,user:Object},setup(g){const n=g,r=D({title:"",description:"",content:"",category_id:"",skpd_id:"",status:"draft",verification_status:"pending",tags:[]}),m=K("");S(()=>{n.knowledge&&(r.title=n.knowledge.title||"",r.description=n.knowledge.description||"",r.content=n.knowledge.content||"",r.category_id=n.knowledge.category_id||"",r.skpd_id=n.knowledge.skpd_id||"",r.status=n.knowledge.status||"draft",r.verification_status=n.knowledge.verification_status||"pending",r.tags=n.knowledge.tags||[],Array.isArray(n.knowledge.tags)&&(m.value=n.knowledge.tags.join(", ")))}),h(m,p=>{r.tags=p.split(",").map(e=>e.trim()).filter(e=>e.length>0)});const j=()=>{r.put(k("admin.knowledge.update",n.knowledge.id),{onSuccess:()=>{},onError:p=>{console.error("Validation errors:",p)}})};return(p,e)=>(d(),U(q,{"page-title":"Edit Knowledge",user:g.user},{default:c(()=>{var x,y;return[t("div",B,[t("div",E,[e[9]||(e[9]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"Edit Knowledge"),t("p",{class:"text-gray-600 mt-1"},"Perbarui informasi knowledge")],-1)),t("div",A,[v(s(w),{href:s(k)("admin.knowledge.show",(x=g.knowledge)==null?void 0:x.id),class:"inline-flex items-center gap-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors"},{default:c(()=>e[8]||(e[8]=[t("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),_(" Kembali ",-1)])),_:1,__:[8]},8,["href"])])]),t("div",N,[t("form",{onSubmit:P(j,["prevent"]),class:"space-y-6"},[t("div",null,[e[10]||(e[10]=t("label",{for:"title",class:"block text-sm font-medium text-gray-700 mb-2"},"Judul Knowledge *",-1)),l(t("input",{id:"title","onUpdate:modelValue":e[0]||(e[0]=o=>s(r).title=o),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500",placeholder:"Masukkan judul knowledge"},null,512),[[f,s(r).title]]),s(r).errors.title?(d(),i("div",T,a(s(r).errors.title),1)):u("",!0)]),t("div",null,[e[11]||(e[11]=t("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-2"},"Deskripsi",-1)),l(t("textarea",{id:"description","onUpdate:modelValue":e[1]||(e[1]=o=>s(r).description=o),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500",placeholder:"Masukkan deskripsi singkat"},null,512),[[f,s(r).description]]),s(r).errors.description?(d(),i("div",C,a(s(r).errors.description),1)):u("",!0)]),t("div",F,[t("div",null,[e[13]||(e[13]=t("label",{for:"category_id",class:"block text-sm font-medium text-gray-700 mb-2"},"Kategori *",-1)),l(t("select",{id:"category_id","onUpdate:modelValue":e[2]||(e[2]=o=>s(r).category_id=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500"},[e[12]||(e[12]=t("option",{value:""},"Pilih Kategori",-1)),(d(!0),i(V,null,M(g.categories,o=>(d(),i("option",{key:o.id,value:o.id},a(o.name),9,O))),128))],512),[[b,s(r).category_id]]),s(r).errors.category_id?(d(),i("div",G,a(s(r).errors.category_id),1)):u("",!0)]),t("div",null,[e[15]||(e[15]=t("label",{for:"skpd_id",class:"block text-sm font-medium text-gray-700 mb-2"},"SKPD *",-1)),l(t("select",{id:"skpd_id","onUpdate:modelValue":e[3]||(e[3]=o=>s(r).skpd_id=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500"},[e[14]||(e[14]=t("option",{value:""},"Pilih SKPD",-1)),(d(!0),i(V,null,M(g.skpds,o=>(d(),i("option",{key:o.id,value:o.id},a(o.name),9,I))),128))],512),[[b,s(r).skpd_id]]),s(r).errors.skpd_id?(d(),i("div",J,a(s(r).errors.skpd_id),1)):u("",!0)])]),t("div",L,[t("div",null,[e[17]||(e[17]=t("label",{for:"status",class:"block text-sm font-medium text-gray-700 mb-2"},"Status *",-1)),l(t("select",{id:"status","onUpdate:modelValue":e[4]||(e[4]=o=>s(r).status=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500"},e[16]||(e[16]=[t("option",{value:"draft"},"Draft",-1),t("option",{value:"published"},"Dipublikasi",-1),t("option",{value:"archived"},"Diarsipkan",-1)]),512),[[b,s(r).status]]),s(r).errors.status?(d(),i("div",$,a(s(r).errors.status),1)):u("",!0)]),t("div",null,[e[19]||(e[19]=t("label",{for:"verification_status",class:"block text-sm font-medium text-gray-700 mb-2"},"Status Verifikasi",-1)),l(t("select",{id:"verification_status","onUpdate:modelValue":e[5]||(e[5]=o=>s(r).verification_status=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500"},e[18]||(e[18]=[t("option",{value:"pending"},"Menunggu Verifikasi",-1),t("option",{value:"verified"},"Terverifikasi",-1),t("option",{value:"rejected"},"Ditolak",-1)]),512),[[b,s(r).verification_status]]),s(r).errors.verification_status?(d(),i("div",z,a(s(r).errors.verification_status),1)):u("",!0)])]),t("div",null,[e[20]||(e[20]=t("label",{for:"tags",class:"block text-sm font-medium text-gray-700 mb-2"},"Tags",-1)),l(t("input",{id:"tags","onUpdate:modelValue":e[6]||(e[6]=o=>m.value=o),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500",placeholder:"Masukkan tags dipisahkan dengan koma"},null,512),[[f,m.value]]),e[21]||(e[21]=t("p",{class:"text-sm text-gray-500 mt-1"},"Pisahkan tags dengan koma (contoh: teknologi, panduan, sop)",-1)),s(r).errors.tags?(d(),i("div",H,a(s(r).errors.tags),1)):u("",!0)]),t("div",null,[e[22]||(e[22]=t("label",{for:"content",class:"block text-sm font-medium text-gray-700 mb-2"},"Konten *",-1)),l(t("textarea",{id:"content","onUpdate:modelValue":e[7]||(e[7]=o=>s(r).content=o),rows:"15",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 font-mono text-sm",placeholder:"Masukkan konten knowledge dalam format Markdown"},null,512),[[f,s(r).content]]),e[23]||(e[23]=t("p",{class:"text-sm text-gray-500 mt-1"},"Gunakan format Markdown untuk formatting (contoh: **bold**, *italic*, # heading)",-1)),s(r).errors.content?(d(),i("div",Q,a(s(r).errors.content),1)):u("",!0)]),t("div",R,[v(s(w),{href:s(k)("admin.knowledge.show",(y=g.knowledge)==null?void 0:y.id),class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors"},{default:c(()=>e[24]||(e[24]=[_(" Batal ",-1)])),_:1,__:[24]},8,["href"]),t("button",{type:"submit",disabled:s(r).processing,class:"px-6 py-2 bg-brand-600 text-white rounded-lg hover:bg-brand-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[s(r).processing?(d(),i("span",X,"Menyimpan...")):(d(),i("span",Y,"Simpan Perubahan"))],8,W)])],32)])])]}),_:1},8,["user"]))}};export{se as default};
